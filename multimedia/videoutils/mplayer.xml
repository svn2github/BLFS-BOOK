<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY mplayer-download-http "http://www.linuxfromscratch.org/~andy/mplayer-15-03-12.tar.xz">
  <!ENTITY mplayer-download-ftp  " ">
  <!ENTITY mplayer-md5sum        "775fcefab99004de09d0fae2c52dc06b">
  <!ENTITY mplayer-size          "9.9 MB">
  <!ENTITY mplayer-buildsize     "137 MB">
  <!ENTITY mplayer-time          "4.7 SBU">

  <!ENTITY mplayer-codec         "essential-20071007.tar.bz2">
  <!ENTITY mplayer-codec-md5sum  "4ea9c2dbd0945c83af1a8d0dd363993c">
  <!ENTITY mplayer-codec-size    "9.5 MB">

  <!ENTITY mplayer-skin          "Blue-1.8.tar.bz2">
  <!ENTITY mplayer-skin-md5sum   "340368f4e33f767d9df109990fb29c02">
  <!ENTITY mplayer-skin-size     "218 KB">
]>

<sect1 id="mplayer" xreflabel="MPlayer-&mplayer-version;">
  <?dbhtml filename="mplayer.html"?>

  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date>$Date$</date>
  </sect1info>

  <title>MPlayer-&mplayer-version;</title>

  <indexterm zone="mplayer">
    <primary sortas="a-MPlayer">MPlayer</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to MPlayer</title>

    <para>The <application>MPlayer</application> package contains a powerful
    audio/video player controlled via the command line or graphical interface
    which is able to play almost every popular audio and video file format. With 
    supported video hardware and additional drivers, <application>MPlayer</application> can
    play video files without an <application>X Window System</application>
    installed.</para>

    <para>For <application>MPlayer</application> general information and
    available features, including a full list of file formats, CODECs and
    output devices supported by <application>MPlayer</application>, visit the
    <ulink url="http://www.mplayerhq.hu/">
    <application>MPlayer</application> web site</ulink>.</para>
    
    &lfs70_checked;

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Download (HTTP): <ulink url="&mplayer-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Download (FTP): <ulink url="&mplayer-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &mplayer-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &mplayer-size;</para>
      </listitem>
      <listitem>
        <para>Estimated disk space required: &mplayer-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimated build time: &mplayer-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Additional Downloads</bridgehead>
<!--
    <itemizedlist spacing='compact'>
      <title>Patches</title>
      <listitem>
        <para>Required Patch: <ulink
        url="http://www.mplayerhq.hu/MPlayer/patches/asmrules_fix_20061231.diff"/></para>
      </listitem>
      <listitem>
        <para>Required Patch: <ulink
        url="http://www.mplayerhq.hu/MPlayer/patches/cddb_fix_20070605.diff"/></para>
      </listitem>
      <listitem>
        <para>Required Patch: <ulink
        url="&patch-root;/MPlayer-&mplayer-version;-ext_ffmpeg-1.patch"/></para>
      </listitem>
    </itemizedlist>
-->
    <itemizedlist spacing='compact'>
      <title>CODECs</title>
      <para>Although MPlayer has built-in support for playing most popular video 
      and audio formats, packages with proprietary binary CODECs that enable support 
      for playing some rare formats are available. Most people don't need the binary 
      CODECs.</para>
      <listitem>
        <para>Essential binary CODECs: <ulink
        url="http://www.mplayerhq.hu/MPlayer/releases/codecs/&mplayer-codec;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &mplayer-codec-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &mplayer-codec-size;</para>
      </listitem>
<!--
      <listitem>
        <para>Alternate CODECs (provides additional functionality and is a
        larger file): <ulink
        url="http://www.mplayerhq.hu/MPlayer/releases/codecs/&mplayer-alt-codec;"/></para>
      </listitem>
        <listitem><para>Additional CODECs: <ulink
        url="http://www.mplayerhq.hu/MPlayer/releases/codecs/"/></para>
      </listitem>
-->
    </itemizedlist>
    
    <itemizedlist spacing='compact'>
      <title>Skins</title>
      <listitem>
        <para>Default GUI skin: <ulink
        url="http://www.mplayerhq.hu/MPlayer/skins/&mplayer-skin;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &mplayer-skin-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &mplayer-skin-size;</para>
      </listitem>
      <listitem>
        <para>Additional skins: <ulink
        url="http://www1.mplayerhq.hu/MPlayer/skins/"/></para>
      </listitem>
    </itemizedlist>
<!--
    <itemizedlist spacing='compact'>
      <title>Fonts</title>
      <listitem>
        <para>Prerendered fonts: <ulink
        url="http://www1.mplayerhq.hu/MPlayer/releases/fonts/&mplayer-font;.tar.bz2"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &mplayer-font-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &mplayer-font-size;</para>
      </listitem>
      <listitem>
        <para>Additional fonts: <ulink
        url="http://www1.mplayerhq.hu/MPlayer/releases/fonts/"/></para>
      </listitem>
    </itemizedlist>
-->
    <para>The CODECs and skins are not required to
    build and use <application>MPlayer</application>.</para>

    <bridgehead renderas="sect3">MPlayer Dependencies</bridgehead>

    <bridgehead renderas="sect4">Recommended</bridgehead>
    <para role="recommended">
    <xref linkend="x-window-system"/>
    </para>
    
    <bridgehead renderas="sect4">Optional Input Drivers and Libraries</bridgehead>
    <para role="optional">
    <xref linkend="cdparanoia"/>,
    <xref linkend="samba3"/>,
    <ulink url="http://www.videolan.org/developers/libbluray.html">libbluray</ulink>,
    <ulink url="http://www.gnu.org/software/libcdio/">libcdio</ulink>,
    <ulink url="http://www.live555.com/mplayer/">LIVE555 Streaming Media</ulink>,
    <ulink url="http://rtmpdump.mplayerhq.hu/">RTMPDump</ulink>,
    <ulink url="http://code.google.com/p/vstream-client/">TiVo vstream client</ulink> and
    <ulink url="http://www.xmms.org/">XMMS</ulink>
    <!-- Mplayer uses internal versions of these:
    <xref linkend="libdvdread"/>,
    <xref linkend="libdvdnav"/>,
    <xref linkend="libdvdcss"/>,
    -->
    </para>

    <bridgehead renderas="sect4">Optional Audio Output Drivers and Libraries</bridgehead>
    <para role="optional">
      <xref linkend="alsa"/>,
      <xref linkend="arts"/>,
      <xref linkend="esound"/>,
      <xref linkend='pulseaudio'/>,  
      <xref linkend="sdl"/>,
      <ulink url="http://jackaudio.org/">JACK</ulink>,
      <ulink url="http://openal.org/">OpenAL</ulink> and
      <ulink url="http://www.radscan.com/nas.html">NAS</ulink>
    </para>

    <bridgehead renderas="sect4">Optional Video Output Drivers and Libraries</bridgehead>
    <para role="optional">
    <xref linkend="aalib"/>,
    <xref linkend="libpng"/>,
    <xref linkend="libjpeg"/>,
    <xref linkend="libmng"/>,
    <xref linkend="giflib"/>,
    <ulink url="http://www.directfb.org/">DirectFB</ulink>,
    <ulink url="http://sam.zoy.org/projects/libcaca/">libcaca</ulink>,
    <ulink url="http://www.svgalib.org/">SVGAlib</ulink> and
    <ulink url="http://www.openjpeg.org/">OpenJPEG</ulink>
    </para>

    <bridgehead renderas="sect4">Optional CODECs</bridgehead>
    <para role="optional">
    <xref linkend="libmad"/>,
    <xref linkend="LZO"/>,
    <xref linkend="speex"/>,
    <xref linkend="libtheora"/>,
    <xref linkend="mpg123"/>,
    <xref linkend="liba52"/>,
    <xref linkend="faac"/>,
    <xref linkend="faad2"/>,
    <xref linkend="libdv"/>,
    <xref linkend="xvid"/>,
    <xref linkend="libvpx"/>,
    <xref linkend="lame"/>,
    <ulink url="ftp://ftp.videolan.org/pub/videolan/vlc/0.8.2/contrib/toolame-02m-beta8.tar.bz2">tooLAME</ulink>,
    <ulink url="http://sourceforge.net/projects/twolame/">TwoLAME</ulink>,
    <ulink url="https://launchpad.net/libgsm">libgsm</ulink>,
    <ulink url="http://www.videolan.org/developers/libdca.html">libdca</ulink>,
    <ulink url="http://www.musepack.net/">libmpcdec</ulink>,
    <ulink url="http://sourceforge.net/projects/opencore-amr/">OpenCore Adaptive Multi Rate</ulink>,
    <ulink url="http://www.broadcom.com/support/crystal_hd/">CrystalHD</ulink>,
    <ulink url="http://www.videolan.org/developers/x264.html">x264</ulink>,
    <ulink url="http://diracvideo.org/download/dirac-research/">Dirac</ulink>,
    <ulink url="http://diracvideo.org/download/schroedinger/">Schroedinger</ulink>,
    <ulink url="http://wiki.multimedia.cx/index.php?title=NUT">libnut</ulink>
    
    <!-- Internal <xref linkend="ffmpeg"/>, -->
    
    </para>
    
    <bridgehead renderas="sect4">Optional Miscellaneous Dependencies</bridgehead>
    <para role="optional">
      <xref linkend="fontconfig"/>,
      <xref linkend="freetype2"/>,
      <xref linkend="fribidi"/>,
      <xref linkend="unrar"/>,
      <xref linkend="gtk2"/> (required for the GUI),
      <ulink url="http://cihar.com/software/enca/">Enca</ulink>,
      <ulink url="http://www.ladspa.org/">LADSPA</ulink>,
      <ulink url="http://sourceforge.net/projects/bs2b/">libbs2b</ulink>,
      <ulink url="http://www.lirc.org/">LIRC</ulink> and
      <ulink url="http://www.dolda2000.com/~fredrik/lirccd/">LIRC Client Daemon</ulink>
    </para>
    
    <para condition="html" role="usernotes">User Notes:
    <ulink url="&blfs-wiki;/mplayer"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation of MPlayer</title>

    <sect3>
      <title>CODEC Installation (Optional)</title>

      <para>If you downloaded the binary CODECs, extract them to 
      <filename class="directory">/usr/lib/mplayer/codecs</filename> using the 
      following commands as the <systemitem class="username">root</systemitem> 
      user (substitute and/or add different CODEC filenames, if necessary):</para>

<screen role="root"><userinput>install -v -d -m755 /usr/lib/mplayer/codecs &amp;&amp;
tar -xvf ../&mplayer-codec; \
    -C /usr/lib/mplayer/codecs --strip-components=1 &amp;&amp;
chown -v -R root:root /usr/lib/mplayer/codecs</userinput></screen>

      <para>If you installed any CODECs, ensure you add
      <option>--codecsdir=/usr/lib/mplayer/codecs</option>
      to the <command>configure</command> script.</para>

    </sect3>

<!--
    <sect3>
      <title>Installing OSD and Subtitles Support (Optional)</title>

      <para>To enable OSD (On Screen Display) and subtitles support, add
	<option>-enable-menu</option> to the <command>configure</command>
      script. You'll also need to set up at least one font (see font
      installation instructions a little later).</para>

    </sect3>
-->
    <sect3>
      <title>Main MPlayer Installation</title>

      <note>
        <para>The package maintainers recommend building without any
        optimizations.</para>
      </note>

      <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/X11R6_symlink.xml"/>

      <para>You may wish to examine the output from
      <command>./configure --help</command> to find out what additional
      parameters to <command>configure</command> are needed to include
      the dependencies you have installed on your system.</para>

      <para>Install <application>MPlayer</application> by running the following
      commands:</para>
<screen><userinput>./configure --prefix=/usr \
            --confdir=/etc/mplayer \
            --enable-dynamic-plugins \
	    --enable-menu \
	    --enable-gui &amp;&amp;
make</userinput></screen>

      <para>This package does not come with a test suite.</para>

      <para>Now, as the <systemitem class="username">root</systemitem> user:</para>

<screen role="root"><userinput>make install &amp;&amp;</userinput></screen>
<!--
install -v -m755 -d /usr/share/doc/mplayer-&mplayer-version; &amp;&amp;
cp -v -R DOCS/*     /usr/share/doc/mplayer-&mplayer-version;</userinput></screen>
-->
      <para>You will need <filename>codecs.conf</filename> only if you want to
      change its properties, as the main binary contains an internal copy of
      it. Ensure any changes you make to <filename>codecs.conf</filename>
      achieve the desired results, as incorrect entries in this file have been
      known to cause errors and render the player unusable. If necessary,
      create the file using the following command.</para>

<screen role="root"><userinput>install -m644 etc/codecs.conf /etc/mplayer</userinput></screen>

      <para>You may also want to copy all the default configuration files to
      <filename class='directory'>/etc/mplayer</filename> for future reference
      or more customization ability.</para>

<screen role="root"><userinput>install -m644 etc/*.conf /etc/mplayer</userinput></screen>

      <!-- Is this needed?
      <para><application>MPlayer</application> requires that the RTC run at a
      frequency of 1024 Hz.  Make this setting change at boot-time by adding
      a line to <filename>/etc/sysctl.conf</filename>:</para>
      
<screen role="root"><userinput>echo "dev.rtc.max-user-freq=1024" >> /etc/sysctl.conf</userinput></screen>
       -->
       
    </sect3>

    <sect3>
      <title>Skin Installation (Optional)</title>

      <para>To enable the GTK frontend of <application>MPlayer</application>, 
      you'll need to install at least one skin. Extract the desired skin and 
      create the default location (as the <systemitem class="username">root</systemitem> 
      user):</para>
      
<screen role="root"><userinput>tar -xvf ../&mplayer-skin; \
    -C /usr/share/mplayer/skins &amp;&amp;
chown -v -R root:root /usr/share/mplayer/skins/Blue &amp;&amp;
chmod -v 755 /usr/share/mplayer/skins/Blue{,/icons} &amp;&amp;
ln -sfv Blue /usr/share/mplayer/skins/default</userinput></screen>

    </sect3>
    
<!--
    <sect3>
      <title>OSD and Subtitles Font Installation (Required if '-enable-menu' Was
      Passed to 'configure')</title>

      <para>The recommended method to set up a font for
      <application>MPlayer</application> is to link a TTF file to
      the <filename class="directory">/usr/share/mplayer</filename> directory.
      For example:</para>

<screen><userinput>install -v -m750 -d /usr/share/mplayer &amp;&amp;
ln -v -sf /usr/share/fonts/X11-TTF/luxisri.ttf \
    ~/.mplayer/subfont.ttf</userinput></screen>

      <para>There are several other ways to set up a font package. To use a
      prerendered <application>MPlayer</application> font package, extract
      and link one of the font tarballs using the following commands:</para>

<screen role="root"><userinput>tar -xvf ../&mplayer-font;.tar.bz2 \
    -C /usr/share/mplayer/font &amp;&amp;
chown -v -R root:root /usr/share/mplayer/font &amp;&amp;
cd /usr/share/mplayer/font &amp;&amp;
ln -v -sf &mplayer-font;/font-arial-<replaceable>&lt;font size&gt;</replaceable>-iso-8859-1/* .</userinput></screen>

      <para>Available font sizes are 14, 18, 24 or 28.</para>

      <para>Additional information as well as additional methods to set up an
      <application>MPlayer</application> font package can be found at <ulink
      url="http://www.mplayerhq.hu/DOCS/HTML/en/subosd.html#mpsub-install"/>.</para>

    </sect3>
    -->
    
    <!--
      Following section should be removed after BLFS-6.2.
      Current Udev creates persistent cd/dvd links automatically
    <sect3>
      <title>Installation for DVD Playback (Optional)</title>

      <para>If you want DVD playback with <application>MPlayer</application>,
      you need to ensure a link exists between your DVD drive and
      <filename>/dev/dvd</filename>. This process is described in the
      <ulink url="&lfs-root;/chapter07/symlinks.html">Creating custom
      symlinks to devices</ulink> section in LFS. The user must be part
      of the <systemitem class="groupname">cdrom</systemitem> group in
      order to use the device.</para>

    </sect3>
    -->
  </sect2>
    
  <sect2 role="commands">
    <title>Command Explanations</title>
    
    <para><parameter>--enable-gui</parameter>: This option is set to build GMPlayer,
    a GTK frontend for MPlayer.</para>
    <para><parameter>--enable-menu</parameter>: This option is set to enable the
    on-screen-display.</para>
    <para><parameter>--codecsdir=/usr/lib/mplayer/codecs</parameter>: Use this option 
    if you installed the binary codecs.</para>
    
  </sect2>

  <sect2 role="configuration">
    <title>Configuring MPlayer</title>

    <sect3 id="mplayer-config">
      <title>Config Files</title>

      <para><filename>/etc/mplayer/*</filename> and
      <filename>~/.mplayer/*</filename></para>

      <indexterm zone="mplayer mplayer-config">
        <primary sortas="e-AA.mplayer">~/.mplayer/*</primary>
      </indexterm>

      <indexterm zone="mplayer mplayer-config">
        <primary sortas="e-etc-mplayer">/etc/mplayer/*</primary>
      </indexterm>

    </sect3>

    <sect3>
      <title>Configuration Information</title>

      <para>Typically, there's no configuration required for the system-wide
      files in <filename class='directory'>/etc/mplayer</filename> (in fact,
      this directory is empty unless you copied the default files as mentioned
      above). Configuration can be accomplished by choosing the configuration
      button located on the <application>MPlayer</application> GUI. Any
      configuration changes made in the GUI will be saved in the user's
      <filename class='directory'>~/.mplayer</filename> directory.</para>

    </sect3>

  </sect2>
  
  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directories</segtitle>

      <seglistitem>
        <seg>gmplayer, mplayer and mencoder</seg>
        <seg>none</seg>
        <seg>/etc/mplayer, /usr/lib/mplayer, /usr/share/mplayer and 
	/usr/share/doc/mplayer</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="gmplayer">
        <term><command>gmplayer</command></term>
        <listitem>
          <para>is a symlink to <command>mplayer</command> which
          brings up the GTK frontend of
          <application>MPlayer</application>.</para>
          <indexterm zone="mplayer gmplayer">
            <primary sortas="b-gmplayer">gmplayer</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mplayer-prog">
        <term><command>mplayer</command></term>
        <listitem>
          <para> is the main MPlayer video player.</para>

<!-- This is not the place for usage directions, right?
<para>Examples of usage:</para>

<screen><userinput>mplayer -fs blfs.avi
mplayer -vo fbdev -fb /dev/fb0 dvd://1 \
    -aid 128 -sub en -framedrop
mplayer -fs vcd://1    # works both for VCDs and SVCDs
mplayer http://fredrik.hubbe.net/plugger/test.mpg</userinput></screen>

          <para>For further information, look at the very good documentation
          included with the package in the source tree subdirectory
          <filename class="directory">DOCS</filename> (also installed at
          <filename class='directory'>/usr/share/doc/mplayer-&mplayer-version;</filename>).</para>
	  -->
          <indexterm zone="mplayer mplayer-prog">
            <primary sortas="b-mplayer">mplayer</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mencoder">
        <term><command>mencoder</command></term>
        <listitem>
          <para>is a powerful command line video decoding, encoding and 
	    filtering tool.</para>
<!-- Usage directions	    
	  is used to encode any <application>MPlayer</application>
          playable movie to DivX4, <application>XviD</application> or any
          CODEC in <filename class='libraryfile'>libavcodec</filename> with
          PCM/MP3/VBRMP3 audio.</para>

          <para>Example:</para>

<screen><userinput>rm frameno.avi
mencoder -dvd 1 -aid 128 -ovc frameno -oac mp3lame \
-lameopts vbr=3 -o frameno.avi

<literal># mencoder should output bitrates for average encodings
# now, choose one you like best! In the following lines,
# replace &lt;bitrate&gt; and &lt;name.avi&gt; with statements of your
# personal liking.</literal>

mencoder -dvd 1 -aid 128 -oac copy -ovc lavc \
    -lavcopts vcodec=mpeg4:vpass=1:vhq:vbitrate=&lt;bitrate&gt; \
    -o &lt;name.avi&gt;
mencoder -dvd 1 -aid 128 -oac copy -ovc lavc \
    -lavcopts vcodec=mpeg4:vpass=2:vhq:vbitrate=&lt;bitrate&gt; \
    -o &lt;name.avi&gt;
mencoder -forceidx &lt;name.avi&gt;</userinput></screen>
-->
          <indexterm zone="mplayer mencoder">
            <primary sortas="b-mencoder">mencoder</primary>
          </indexterm>
        </listitem>
      </varlistentry>
<!-- not installed anymore?
      <varlistentry id="libdha">
        <term><filename class='libraryfile'>libdha.so</filename></term>
        <listitem>
          <para>contains functions used by the
          <application>MPlayer</application> programs.</para>
          <indexterm zone="mplayer libdha">
            <primary sortas="c-libdha">libdha.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
-->
<!-- not installed anymore
      <varlistentry id="libpostproc">
        <term><filename class='libraryfile'>libpostproc.so</filename></term>
        <listitem>
          <para>is a post-processing filter library used by the
          <application>MPlayer</application> programs and other packages.</para>
          <indexterm zone="mplayer libpostproc">
            <primary sortas="c-libpostproc">libpostproc.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
-->
    </variablelist>

  </sect2>

</sect1>

<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY texlive-year                "2013">
  <!ENTITY texlive-installer           "http://mirror.ctan.org/systems/texlive/tlnet/install-tl-unx.tar.gz">

  <!ENTITY texlive-source-download-http " ">
  <!ENTITY texlive-source-download-ftp  "ftp://tug.org/texlive/historic/&texlive-year;/texlive-&texlive-version;-source.tar.xz">
  <!ENTITY texlive-source-md5sum        "f52599c99fb1035399b907f4c54f1125">
  <!ENTITY texlive-source-size          "172 MB">

  <!ENTITY texlive-buildsize            "1.6 GB">
  <!ENTITY texlive-time                 "9.6 SBU">
]>

<sect1 id="texlive" xreflabel="texlive-&texlive-version;">
  <?dbhtml filename="texlive.html"?>

  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date>$Date$</date>
  </sect1info>

  <title>texlive-&texlive-version;</title>

  <indexterm zone="texlive">
    <primary sortas="a-texlive">texlive</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to TeX Live</title>

    <para>The <application>TeX Live</application> package is a comprehensive
    TeX document production system.  It includes TEX, LaTeX2e, ConTEXt,
    Metafont, MetaPost, BibTeX and many other programs; an extensive collection
    of macros, fonts and documentation; and support for typesetting in many
    different scripts from around the world.</para>

    &lfs74_checked;

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Download (HTTP): <ulink url="&texlive-source-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Download (FTP): <ulink url="&texlive-source-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &texlive-source-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &texlive-source-size;</para>
      </listitem>
      <listitem>
        <para>Estimated disk space required: &texlive-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimated build time: &texlive-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Additional Downloads</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>The TeX Live installer: <ulink url="&texlive-installer;"/></para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">TeX Live Dependencies</bridgehead>

    <bridgehead renderas="sect4">Recommended (to build from source)</bridgehead>
    <para role="recommended">
      The source ships with its own versions of <emphasis>many</emphasis>
      libraries, and will use them unless it is forced to use the system
      versions.
      <xref linkend="gs"/>,
      <xref linkend="icu"/>,
      <xref linkend="freetype2"/>,
      <xref linkend="fontconfig"/>,
      <xref linkend="graphite2"/>,
      <xref linkend="harfbuzz"/> (linked to graphite2),
      <xref linkend="libpng"/>,
      <xref linkend="poppler"/>,
      <xref linkend="x-window-system"/>
    </para>


    <bridgehead renderas="sect4">Optional (to build from source)</bridgehead>
    <para role="optional">
      The source ships with its own versions of these libraries, which are either
      not under active development, or only used for limited functionality.  If
      you install these, as with some other optional dependencies in this book you
      will need to tell <command>configure</command> to use the system versions.
      <ulink url="http://libgd.bitbucket.org">GD</ulink>,
      <ulink url="http://fossies.org/linux/misc/t1lib-5.1.2.tar.gz/">t1lib</ulink>,
      <ulink url="http://sourceforge.net/projects/zziplib/">ZZIPlib</ulink>,
      <ulink url="http://www.gnu.org/software/clisp/">CLISP</ulink>,
      <ulink url="http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&amp;id=TECkitDownloads">TECkit</ulink>
    </para>

    <bridgehead renderas="sect4">Runtime dependencies if building from source</bridgehead>
    <para role="recommended">
      not yet adequate to rebuild this),
      <xref linkend="tk"/> for ep2pdftk.
    </para>

    <para condition="html" role="usernotes">User Notes:
    <ulink url="&blfs-wiki;/texlive"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation of TeX Live</title>

    <para>The <application>TeX Live</application> set of programs with its
    supporting documents, fonts, and utilities is very large.  The upstream
    maintainers recommend placing all files in a single directory structure.
    BLFS recommends <filename class='directory'>/opt/texlive</filename>.</para>

    <para>First, unpack the installer and change into the installer's
    directory, <filename class='directory'>install-tl-&lt;CCYYMMDD&gt;</filename>.
    This directory name changes frequently when the installer is updated,
    so replace &lt;CCYYMMDD&gt; by the correct directory name.</para>

<screen><userinput>tar -xf install-tl-unx.tar.gz &amp;&amp;
cd install-tl-&lt;CCYYMMDD&gt; </userinput></screen>

    <note><para>The distribution binaries installed below use static linking
    for internal <application>TeX Live</application> libraries.  Additional
    libraries as specified in the dependencies section do not need to be
    present during the install, but the programs that need them will not run
    until their specific dependencies are installed.</para></note>

    <para>Now, as the <systemitem class="username">root</systemitem>
    user:</para>

<screen><userinput role="root">TEXLIVE_INSTALL_PREFIX=/opt/texlive ./install-tl</userinput></screen>

    <para>This command is interactive and allows selection or modification of
    platform, packages, directories, and other options.  The full installation
    scheme will require about 3.5 gigabytes of disk space.  The time to complete
    the download will depend on your internet connection speed and the
    number of packages selected.</para>

    <para>After the package download is complete, the next step is to make sure
    that the system can properly find the files.  If you set up your login
    scripts as recommended in <xref linkend='postlfs-config-profile'/>, update
    the needed paths by appending to the <filename>extrapaths.sh</filename> script.
    The programs are always installed in an &lt;ARCH&gt;-linux subdirectory.  If
    you are not using x86_64, <emphasis>always</emphasis> change that to your
    actual installation location.</para>

<screen><userinput role="root">cat &gt;&gt; /etc/profile.d/extrapaths.sh &lt;&lt; "EOF"
pathappend /usr/share/man                        MANPATH
pathappend /opt/texlive/&texlive-year;/texmf-dist/doc/man  MANPATH
pathappend /usr/share/info                       INFOPATH
pathappend /opt/texlive/&texlive-year;/texmf-dist/doc/info INFOPATH
pathappend /opt/texlive/&texlive-year;/bin/x86_64-linux
EOF</userinput></screen>

    <note><para>The standard MANPATH and INFOPATH path are specified above to
    ensure they are included.  If they are already set in the boot script
    procedure, the pathappend function will ensure duplicates are
    removed, so including them here will do no harm.</para></note>

    <para>The new paths can be immediately activated by running <command>source
    /etc/profile</command>.</para>

    <para>At this point the binary installation is complete.</para>

    <para>Please note that installing from source will recompile the binary
    programs and recreate the <literal>man</literal> and <literal>info</literal>
    files.  It will also overwrite the scripts - some of these may be older
    versions than those from the newer installer.  It will <emphasis>not</emphasis>
    recreate any of the following: the more than 200 symlinks in the
    &lt;ARCH&gt;-linux directory (some are alternate names, many are pointers to
    the scripts), html files, PDF files, licenses, README files, two config
    files (<filename>texmf.cnf</filename> and <filename>texmfcnf.lua</filename>),
    nor the many package and font files in
    <filename class="directory">texmf-dist</filename> and
    <filename class="directory">texmf-var</filename>, nor the files recording
    the actions of the installer, and the <filename>ls-R</filename> files listing
    what was originally installed.</para>

    <para>At the moment, these instructions do not rebuild
    <application>asy</application> and <application>xindy</application> which were
    installed by the binary installer.</para> <!-- FIXME -->

    <para>  If building from
    source is desired, continue as a normal user.  Extract the source package as
    usual.  Again, change x86_64-linux to whatever matches your architecture.
    The developers do not recommend building in the source directory, so enter
    the following commands:</para>

<screen><userinput>mkdir texlive-build &amp;&amp;
cd texlive-build    &amp;&amp;

../configure --prefix=/opt/texlive/2013 \
             --bindir=/opt/texlive/2013/bin/x86_64-linux \
             --datarootdir=/opt/texlive/2013 \
             --includedir=/usr/include \
             --infodir=/opt/texlive/2013/texmf-dist/doc/info \
             --libdir=/usr/lib \
             --mandir=/opt/texlive/2013/texmf-dist/doc/man \
             --disable-native-texlive-build \
             --disable-static --enable-shared \
             --with-system-libgs \
             --with-system-poppler \
             --with-system-freetype2 \
             --with-system-fontconfig \
             --with-system-libpng \
             --with-system-icu \
             --with-system-graphite2 \
             --with-system-harfbuzz \
             --with-system-xpdf \
             --with-system-poppler \
             --with-system-cairo \
             --with-system-pixman \
             --with-system-zlib \
             --with-banner-add=" - BLFS" &amp;&amp;
make</userinput></screen>

    <para>To test the results, issue: <command>make -k check</command>.</para>

    <para>Now, as the <systemitem class="username">root</systemitem>
    user:</para>

<screen><userinput role="root">make install</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Command Explanations</title>

    <para>
      <parameter>--prefix=, --bindir=, --datarootdir=, --infodir=, --mandir= ...
      </parameter>: these switches ensure that the files installed from source
      will overwrite the corresponding files previously installed by
      <application>install-tl</application>.
    </para>

    <para>
      <parameter>--includedir=, --libdir= ...</parameter> : these switches ensure
      that the libraries will be found at runtime, and that programs can be
      compiled against them.
    </para>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>

    <para>
      <parameter>--enable-shared</parameter>: Use shared versions of
      <filename class="libraryfile">libkpathsea</filename> and
      <filename class="libraryfile">libptexenc</filename>.
    </para>

    <para>
      <parameter>--with-system-...</parameter>: Unless this parameter is used,
      the included versions of these libraries  will be statically compiled
      into the programs which need them.  If you decided not to install a
      recommended library, omit the corresponding switches.
    </para>

    <para>
      <parameter>--with-system-xpdf</parameter>: Uniquely, this parameter has
      a non-standard meaning, it tells <command>configure</command> to use the
      system-installed <application>poppler</application> headers and library.
      Again, omit this if you have not installed
      <application>poppler</application>.
    </para>

    <para>
      <option>--without-x</option>: use this if you do not have Xorg installed.
    </para>

  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directories</segtitle>

      <seglistitem>
        <seg>Over 300 binaries and symlinks to scripts</seg>
        <seg>None</seg>
        <seg>/opt/texlive</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="texlive-programs">
        <term><command>TeX&nbsp;programs</command></term>
        <listitem>
          <para>included in the <application>TeX Live</application> package are
          too numerous to individually list. Please refer to the individual
          program man and html pages in the installation directory's 2011/index.html
          directory.</para>
          <indexterm zone="texlive texlive-programs">
            <primary sortas="b-texlive-programs">TeX Live programs</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>

  </sect2>

</sect1>

<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
   "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY xorg-server-download-http "http://xorg.freedesktop.org/releases/individual/xserver/xorg-server-&xorg-server-version;.tar.bz2">
  <!ENTITY xorg-server-download-ftp  "">
  <!ENTITY xorg-server-md5sum        "5cd3316f07ed32a05cbd69e73a71bc74">
  <!ENTITY xorg-server-size          "5.8 MB">
  <!ENTITY xorg-server-buildsize     "413 MB">
  <!ENTITY xorg-server-time          "5.96 SBU">

]>

<sect1 id="xorg7-server" xreflabel="Xorg-Server-&xorg-server-version;">
  <?dbhtml filename="x7server.html"?>

  <sect1info>
    <othername>$LastChangedBy: dj $</othername>
    <date>$Date: 2006-04-15 23:04:51 -0500 (Sat, 15 Apr 2006) $</date>
<!--    <keywordset>
      <keyword role="package">X11R&xorg7-version;-src.tar</keyword>
      <keyword role="ftpdir">Xorg7</keyword>
    </keywordset>
########## Need a way to fix this on the mirrors ##########
##### Maybe a single tarball is the way to handle it ######
-->


  </sect1info>

  <title>Xorg-Server-&xorg-server-version;</title>

  <indexterm zone="xorg7-server">
    <primary sortas="a-xorg7-server">Xorg Server</primary>
  </indexterm>

  <para>The <application>Xorg</application> Server is the core
  of the X Window system.</para>

  <bridgehead renderas="sect3">Package Information</bridgehead>
  <itemizedlist spacing="compact">
    <listitem>
      <para>Download (HTTP): <ulink url="&xorg-server-download-http;"/></para>
    </listitem>
    <listitem>
      <para>Download (FTP): <ulink url="&xorg-server-download-ftp;"/></para>
    </listitem>
    <listitem>
      <para>Download MD5 sum: &xorg-server-md5sum;</para>
    </listitem>
    <listitem>
      <para>Download size: &xorg-server-size;</para>
    </listitem>
    <listitem>
      <para>Estimated disk space required: &xorg-server-buildsize;</para>
    </listitem>
    <listitem>
      <para>Estimated build time: &xorg-server-time;</para>
    </listitem>
  </itemizedlist>

  <bridgehead renderas="sect3">Xorg Server Dependencies</bridgehead>

  <bridgehead renderas="sect4">Required</bridgehead>
  <para role="required"><xref linkend="xorg7-font"/></para>

  <bridgehead renderas="sect4">Optional</bridgehead>
  <para><xref linkend="mesalib"/> and
  <xref linkend="luit"/></para>

  <sect2 role="installation">
    <title>Installation of Xorg Server</title>

    <note>
      <para>If you intend to build with <application>Mesa</application>,
      you must have the <application>Mesa</application> source
      directory available when building the
      <application>Xorg-server</application>.</para>
    </note>

    <para>A serious security vulnerability was recently discovered that will
    allow a malicious user to execute code as the root user.  Fix the
    vulnerability with the following command:</para>

<screen><userinput>sed -i 's/ntri &amp; sizeof/ntri * sizeof/' render/mitri.c</userinput></screen>

    <para>Install the server by running the following commands:</para>

<screen><userinput>./configure $XORG_CONFIG \
    --with-mesa-source='<replaceable>&lt;/path/to&gt;</replaceable>/Mesa-&mesalib-version;' \
    --with-fontdir=$XORG_PREFIX/lib/X11/fonts \
    --with-module-dir=$XORG_PREFIX/lib/X11/modules \
    --enable-install-setuid &amp;&amp;
make</userinput></screen>

    <para>Now as the <systemitem class="username">root</systemitem>
    user:</para>

<screen><userinput role="root">make install</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Command Explanations</title>

    <para><parameter>--with-mesa-source=...</parameter>: This switch directs
    the build system to the location of the <application>Mesa</application>
    source directory.  If you wish to build without 
    <application>Mesa</application>, omit this switch.</para>

    <para><parameter>--enable-install-setuid</parameter>: The Xorg binary must
    run as the root user.  This switch ensures that the binary is installed 
    setuid when the build is done by an unprivileged user.</para>

  </sect2>

</sect1>

<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY x7drivers-download-http "http://xorg.freedesktop.org/releases/individual/driver/">
  <!ENTITY x7drivers-download-ftp  "ftp://ftp.x.org/pub/individual/driver/">
  <!ENTITY x7drivers-wget          "&files-anduin;/xorg/driver-&xorg7-release;.wget">
  <!ENTITY x7drivers-md5sum        "&files-anduin;/xorg/driver-&xorg7-release;.md5">
  <!ENTITY x7drivers-size          "18.1 MB">
  <!ENTITY x7drivers-buildsize     "71.6 MB">
  <!ENTITY x7drivers-time          "3.9 SBU">

]>

<sect1 id="xorg7-driver" xreflabel="Xorg Drivers">
  <?dbhtml filename="x7driver.html"?>

  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date>$Date$</date>
  </sect1info>

  <title>Xorg Drivers</title>

  <indexterm zone="xorg7-driver">
    <primary sortas="a-xorg7-driver">Xorg Drivers</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to Xorg Drivers</title>

    <para>The <application>Xorg</application> drivers provide the means
    for the xserver to take advantage of installed hardware.</para>

    &lfs70_checked;

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Download (HTTP): <ulink url="&x7drivers-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Download (FTP): <ulink url="&x7drivers-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: <ulink url="&x7drivers-md5sum;"/></para>
      </listitem>
      <listitem>
        <para>Download size: &x7drivers-size;</para>
      </listitem>
      <listitem>
        <para>Estimated disk space required: &x7drivers-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimated build time: &x7drivers-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Additional Downloads</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Required download list: <ulink url="&x7drivers-wget;"/></para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Xorg Drivers Dependencies</bridgehead>

    <bridgehead renderas="sect4">Required</bridgehead>
    <para role="required"><xref linkend="xorg7-server"/></para>

    <bridgehead renderas="sect4">Optional</bridgehead>
    <para role="optional"><xref linkend="mesalib"/></para>

    <para condition="html" role="usernotes">User Notes:
    <ulink url='&blfs-wiki;/Xorg7Drivers'/></para>

  </sect2>

  <sect2>
    <title>Downloading Xorg Drivers</title>

    <para>To download the needed files using <application>wget</application>,
    use the following commands:</para>

<screen><userinput>mkdir driver &amp;&amp;
cd driver &amp;&amp;
grep -v '^#' ../driver-&xorg7-release;.wget | wget -i- -c \
    -B http://xorg.freedesktop.org/releases/individual/driver/ &amp;&amp;
md5sum -c ../driver-&xorg7-release;.md5</userinput></screen>

  </sect2>

  <sect2 role="installation">
    <title>Installation of Xorg Drivers</title>

    <warning><para>It is very important not to build display drivers that
    cannot be used with your hardware.  For instance, do not build Sun drivers
    for an x86 PC as the Sun drivers will expect to see SPARC symbols
    exported from the kernel.  Failure to follow this warning will result
    in a display lockup, which requires a hard reboot, when configuring
    <application>Xorg</application> for the first time. For this reason,
    these drivers have been commented out in the wget file.</para></warning>

    <para>Install the drivers by running the following commands for each
    package:</para>

<screen><userinput>case $(basename "$PWD") in
xf86-input-evdev-[0-9]* | xf86-video-ati-[0-9]* | \
xf86-video-fbdev-[0-9]* | xf86-video-glint-[0-9]* | \
xf86-video-newport-[0-9]* )
    sed -i -e "s/\xc3\xb8/\\\\[\/o]/" \
           -e "s/\xc3\xa4/\\\\[:a]/" \
           -e "s/\xc3\x9c/\\\\[:U]/" man/*.man
    ;;
esac &amp;&amp;
case $(basename "$PWD") in
xf86-video-s3-[0-9]* | xf86-video-xgi-[0-9]* )
    for file in `grep -Rl "xf86Version.h" *`
    do
        sed 's@xf86Version.h@xorgVersion.h@g' -i "$file"
    done
    ;;
esac &amp;&amp;
./configure $XORG_CONFIG \
    --with-xorg-module-dir=$XORG_PREFIX/lib/X11/modules &amp;&amp;
make</userinput></screen>

    <para>These packages do not provide test suites.</para>

    <para>Now as the <systemitem class="username">root</systemitem>
    user:</para>

<screen role="root"><userinput>make install</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Command Explanations</title>

    <para><command>sed -i ... man/*.man</command>: A few packages install
    man pages in UTF-8 encoding, and they will not display correctly
    using <application>Man-DB</application>. This command converts the
    offending characters to ones that <command>man</command> can properly
    display.</para>

    <para><parameter>--with-xorg-module-dir=...</parameter>: This switch
    ensures that the drivers are installed into the correct directory.</para>

  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directories</segtitle>

      <seglistitem>
        <seg>None</seg>
        <seg>None</seg>
        <seg><envar>$XORG_PREFIX</envar>/lib/X11/modules/{drivers,input}</seg>
      </seglistitem>
    </segmentedlist>

  </sect2>

</sect1>

<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!-- <!ENTITY qt4-download-http "http://ftp.silug.org/mirrors/ftp.trolltech.com/qt/source/qt-everywhere-opensource-src-&qt4-version;.tar.gz"> -->
  <!ENTITY qt4-download-http "http://get.qt.nokia.com/qt/source/qt-everywhere-opensource-src-&qt4-version;.tar.gz">
  <!ENTITY qt4-download-ftp  "ftp://ftp.trolltech.com/qt/source/qt-everywhere-opensource-src-&qt4-version;.tar.gz">
  <!ENTITY qt4-md5sum        "6f88d96507c84e9fea5bf3a71ebeb6d7">
  <!ENTITY qt4-size          "211 MB">
  <!ENTITY qt4-buildsize     "1500 MB (full), 1300 (essential)">
  <!ENTITY qt4-time          "72 SBU (full), 60 SBU (essential)">
]>

<sect1 id="qt4" xreflabel="Qt-&qt4-version;">
  <?dbhtml filename="qt4.html" ?>

  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date>$Date$</date>
  </sect1info>

  <title>Qt-&qt4-version;</title>

  <indexterm zone="qt4">
    <primary sortas="a-qt4">Qt4</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to Qt4</title>

    <para>The <application>Qt4</application> package contains several
    <application>C++</application> libraries with both GUI and non-GUI
    components.  One of the major users of <application>Qt4</application> is
    <application>KDE4</application>.</para>

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Download (HTTP): <ulink url="&qt4-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Download (FTP): <ulink url="&qt4-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &qt4-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &qt4-size;</para>
      </listitem>
      <listitem>
        <para>Estimated disk space required: &qt4-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimated build time: &qt4-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Qt Dependencies</bridgehead>

    <bridgehead renderas="sect4">Required</bridgehead>
    <para role="required"><xref linkend="x-window-system"/></para>

    <bridgehead renderas="sect4">Recommended</bridgehead>
    <para role="recommended"><xref linkend="libjpeg"/>,
      <xref linkend="libmng"/>,
      <xref linkend="libtiff"/>, and
      <xref linkend="libpng"/>
    </para>

    <bridgehead renderas="sect4">Optional</bridgehead>
    <para role="optional">
<!--      <xref linkend="nas"/>, -->
      <xref linkend="dbus"/>,
      <xref linkend="gst-plugins-base"/>,
      <ulink url="http://www.pulseaudio.org/">PulseAudio</ulink>,
      <xref linkend="glib2"/>,
      <xref linkend="gtk2"/>,
      <xref linkend="openssl"/>,
      <xref linkend="cups"/>,
      <xref linkend="mysql"/>,
      <xref linkend="postgresql"/>,
      <xref linkend="unixodbc"/>, and
      <xref linkend="sqlite"/>
    </para>

    <para condition="html" role="usernotes">User Notes:
    <ulink url="&blfs-wiki;/qt4"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation of Qt4</title>

    <para>There are several ways to install a complicated package such as
    <application>Qt4</application>. The files are not completely position
    independent. Installation procedures execute the program
    <command>pkg-config</command> to determine the location of package
    executables, libraries, headers, and other files. For
    <application>Qt4</application>, <command>pkg-config</command> will look
    for the appropriate <filename>lib/pkgconfig/Qt*.pc</filename> files which
    must be modified if relocating the package. These files are set up correctly
    by the build process.</para>

    <para>The default installation places the files in
    <filename class='directory'>/usr/local/qt/</filename>. Many commercial
    distributions place the files in the system's
    <filename class='directory'>/usr</filename> hierarchy. The package can
    also be installed in an arbitrary directory.</para>

    <para>The advantage of this method is that no updates to the
    <filename>/etc/ld.so.conf</filename> or
    <filename>/etc/man_db.conf</filename> files are required. The package
    files are distributed within several subdirectories of the
    <filename class='directory'>/usr</filename> hierarchy.
    This is the method that most commercial distributions use.</para>

    <note>
      <para>There is no conflict between the <application>Qt3</application>
      and <application>Qt4</application> applications and headers so both
      can be installed at the same time.  This may be necessary to build or
      run Qt3 applications like <application>KDE3</application> and
      <application>Qt4</application> applications like
      <application>Doxygen</application>'s <application>doxywizard</application>
      on the same system.
      </para>

      <para>To set up both <application>Qt3</application> and
      <application>Qt4</application> on the same system, choose the primary
      version for the <filename>/opt/qt</filename> symbolic link and add
      the explicit library directory of the other version to
      <filename>/etc/ld.so.conf</filename>.</para>

      <para>On a system with both versions of Qt, there is a name conflict with
      Qt applications such as <filename>qmake</filename>,
      <filename>assistant</filename>, and <filename>designer</filename>.  In
      such a case, make sure the PATH variable lists the proper
      <filename>/opt/qt&lt;version&gt;/bin</filename> directory before the
      other Qt bin directory.  </para>
    </note>

    <caution>
      <para>If <application>Qt4</application> is being reinstalled and the
      <filename class='directory'>/usr</filename>
      directory is used as the prefix, run the following commands from a
      console or non-Qt4 based window manager.  It overwrites
      <application>Qt4</application> libraries that should not be in use during
      the install process.</para>
    </caution>

    <note>
      <para>The build time and space required for the full
      <application>Qt4</application> is quite long.  The instructions below do
      not build the tutorials and examples.  Removing the
      <parameter>-nomake</parameter> lines will create a complete build.</para>
    </note>

    <para>The method recommended by the <application>Qt4</application>
    developers does not use the /usr directory prefix. It has the advantage of
    keeping all the package files consolidated in a dedicated directory
    hierarchy. By using this method, an update can be made without overwriting
    a previous installation and users can easily revert to a previous version
    by changing one symbolic link.</para>

    <para>The <application>Qt4</application> developers use a default location
    of <filename class='directory'>/usr/local/qt/</filename>, however the
    procedure below puts the files in <filename
    class='directory'>/opt/qt-&qt4-version;/</filename>
    and then creates a symbolic link to <filename>/opt/qt/</filename>.</para>

    <para>Install <application>Qt4</application> by running the
    following commands:</para>

<screen><userinput>./configure -prefix /opt/qt-&qt4-version;  \
            -nomake examples         \
            -nomake demos            &amp;&amp;
make</userinput></screen>

    <note><title>Phonon</title>
    <para>If <application>KDE4</application> is intended to be installed, add
    <option>-no-phonon</option> to the <command>./configure</command> command
    above. While installing <application>KDE4</application>, a separate version of the
    <application>Phonon</application> libraries will be installed which better
    matches the needs of the <application>KDE4</application> desktop.</para></note>
    
    <para>This package does not come with a test suite.</para>

    <para>Now, as the <systemitem class="username">root</systemitem>
    user:</para>

<screen role="root"><userinput>make install</userinput></screen>

    <para>If you installed <application>Qt4</application> in the /opt directory,
    again as the <systemitem class="username">root</systemitem> user issue:</para>

<screen role="root"><userinput>ln -v -sfn qt-&qt4-version; /opt/qt</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Command Explanations</title>

    <para><parameter>-nomake examples, -nomake demos</parameter>:
    These switches disable building programs that are only of interest
    to a <application>Qt4</application> developer.</para>

    <para>There are several optional directories that can be specified in the
    <command>./configure</command> line.  These include
    <option>-bindir</option>, <option>-libdir</option>,
    <option>-docdir</option>, and <option>-headerdir</option>.  For a complete
    list, run <command>./configure -help</command>.</para>

    <para><parameter>-plugin-sql-<replaceable>&lt;driver&gt;</replaceable></parameter>
    or <parameter>-qt-sql-<replaceable>&lt;driver&gt;</replaceable></parameter>:
    These switches build SQL support into the <application>Qt4</application>
    libraries.</para>

    <note>
      <para>To check if <application>mysql</application> is autodetected
      properly, examine the output of <command>./configure -qt-sql-mysql
      -help</command>. Other database support will require similar
      <command>configure</command> parameters.</para>
    </note>

  </sect2>

  <sect2 role="configuration">
    <title>Configuring Qt4</title>

    <sect3 id='qt4-config'>
      <title>Configuration Information</title>

      <para>If you installed <application>Qt4</application> in a location other
      than /usr, you also need to update the following configuration files so
      that <application>Qt4</application> is correctly found by other packages
      and system processes.</para>

      <para>As the <systemitem class="username">root</systemitem> user, update
      the <filename>/etc/ld.so.conf</filename> file and the dynamic linker's
      run-time cache file:</para>

<screen role="root"><userinput>cat &gt;&gt; /etc/ld.so.conf &lt;&lt; "EOF" &amp;&amp;
<literal># Begin qt addition to /etc/ld.so.conf

/opt/qt/lib

# End qt addition</literal>
EOF
ldconfig</userinput></screen>

      <indexterm zone="qt qt4-config">
        <primary sortas="e-etc-ld.so.conf">/etc/ld.so.conf</primary>
      </indexterm>

      <para>Update the <envar>PKG_CONFIG_PATH</envar> environment variable
      in your <filename>~/.bash_profile</filename> or
      <filename>/etc/profile</filename> with the following:</para>

<screen><literal>PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/opt/qt/lib/pkgconfig</literal></screen>

      <para>If you want the <application>Qt4</application> executables in your
      shell search path, update the <envar>PATH</envar> environment variable
      in your <filename>~/.bash_profile</filename> or
      <filename>/etc/profile</filename> to include
      <filename class='directory'>/opt/qt/bin</filename>.</para>

    </sect3>
  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directories</segtitle>

      <seglistitem>
        <seg>assistant, assistant_adp, designer, lconvert, linguist, lrelease,
        lupdate, moc, pixeltool, qcollectiongenerator, qdbus, qdbuscpp2xml,
        qdbusviewer, qdbusxml2cpp, qhelpconverter, qhelpgenerator,qmake,
        qt3to4, qtconfig, qtdemo, rcc, uic, uic3, and xmlpatterns</seg>

        <seg>libphonon.so, libQt3Support.so, libQtAssistantClient.so,
        libQtCLucene.so, libQtCore.so, libQtDesigner.so, libQtDBus.so,
        libQtDesignerComponents.so, libQtGui.so, libQtHelp.so, libQtNetwork.so,
        libQtOpenGL.so, libQtScript.so, libQtScriptTools.so, libQtSql.so,
        libQtSvg.so, libQtTest.so, libQtUiTools.a, libQtWebKit.so, libQtXml.so,
        libQtXmlPatterns.so, and numerous plugin modules installed in
        <filename class='directory'>/opt/qt/plugins</filename></seg>

        <seg>/opt/qt-&qt4-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="qt4-assistant">
        <term><command>assistant</command></term>
        <listitem>
          <para>is a tool for presenting on-line documentation.</para>
          <indexterm zone="qt4 qt4-assistant">
            <primary sortas="b-assistant">assistant</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-designer">
        <term><command>designer</command></term>
        <listitem>
          <para>is a full-fledged GUI builder. It includes
          powerful features such as preview mode, automatic widget
          layout, support for custom widgets, and an advanced
          property editor.</para>
          <indexterm zone="qt4 qt4-designer">
            <primary sortas="b-designer">designer</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-linguist">
        <term><command>linguist</command></term>
        <listitem>
          <para>provides support for translating applications into
          local languages.</para>
          <indexterm zone="qt4 qt4-linguist">
            <primary sortas="b-linguist">linguist</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-lrelease">
        <term><command>lrelease</command></term>
        <listitem>
          <para>is a simple command line tool. It reads a Qt project
          file and produces message files used by the application.</para>
          <indexterm zone="qt4 qt4-lrelease">
            <primary sortas="b-lrelease">lrelease</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-lupdate">
        <term><command>lupdate</command></term>
        <listitem>
          <para>reads a Qt project file, finds the translatable
          strings in the specified source, header and Qt Designer
          interface files, and produces or updates the translation
          files listed in the project file.</para>
          <indexterm zone="qt4 qt4-lupdate">
            <primary sortas="b-lupdate">lupdate</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-moc">
        <term><command>moc</command></term>
        <listitem>
          <para>generates Qt meta object support code.</para>
          <indexterm zone="qt4 qt4-moc">
            <primary sortas="b-moc">moc</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-pixeltool">
        <term><command>pixeltool</command></term>
        <listitem>
          <para>is a desktop magnifier and as you move your mouse around
          the screen it will show the magnified contents in its window.</para>
          <indexterm zone="qt4 qt4-pixeltool">
            <primary sortas="b-pixeltool">pixeltool</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-qmake">
        <term><command>qmake</command></term>
        <listitem>
          <para>qmake uses information stored in project files to
          determine what should go in the makefiles it generates.</para>
          <indexterm zone="qt4 qt4-qmake">
            <primary sortas="b-qmake">qmake</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-qt3to4">
        <term><command>qt3to4</command></term>
        <listitem>
          <para>qt3to4 is a tool to help update Qt3 code to Qt4.</para>
          <indexterm zone="qt4 qt4-qt3to4">
            <primary sortas="b-qt3to4">qt3to4</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-qtconfig">
        <term><command>qtconfig</command></term>
        <listitem>
          <para>is used to customize the appearance of Qt applications.</para>
          <indexterm zone="qt4 qt4-qtconfig">
            <primary sortas="b-qtconfig">qtconfig</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-qtdemo">
        <term><command>qtdemo</command></term>
        <listitem>
          <para>is a portal into various demonstrations of Qt
          applications.</para>
          <indexterm zone="qt4 qt4-qtdemo">
            <primary sortas="b-qtdemo">qtdemo</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-rcc">
        <term><command>rcc</command></term>
        <listitem>
          <para>is a resource compiler used in conjucntion with designer.</para>
          <indexterm zone="qt4 qt4-rcc">
            <primary sortas="b-rcc">rcc</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-uic">
        <term><command>uic</command></term>
        <listitem>
          <para>is a Qt user interface compiler.</para>
          <indexterm zone="qt4 qt4-uic">
            <primary sortas="b-uic">uic</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-uic3">
        <term><command>uic3</command></term>
        <listitem>
          <para>is a tool to generate Qt4 code out of
          user interface files generated by the Qt3
          version of <command>designer</command>.</para>
          <indexterm zone="qt4 qt4-uic3">
            <primary sortas="b-uic3">uic3</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>

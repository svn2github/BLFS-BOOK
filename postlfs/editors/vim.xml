<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
   "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

    <!-- Inserted as a reminder to do this. The mention of a test suite
         is usually right before the root user installation commands. Please
         delete these 12 (including one blank) lines after you are done.-->

    <!-- Use one of the two mentions below about a test suite,
         delete the line that is not applicable. Of course, if the
         test suite uses syntax other than "make check", revise the
         line to reflect the actual syntax to run the test suite -->

    <!-- <para>This package does not come with a test suite.</para> -->
    <!-- <para>To test the results, issue: <command>make check</command>.</para> -->

  <!ENTITY vim-download-http "http://ftp.at.vim.org/pub/vim/unix/vim-&vim-version;.tar.bz2">
  <!ENTITY vim-download-ftp  "ftp://ftp.vim.org/pub/vim/unix/vim-&vim-version;.tar.bz2">
  <!ENTITY vim-md5sum        "774c14d93ce58674b3b2c880edd12d77">
  <!ENTITY vim-size          "3.6 MB">
  <!ENTITY vim-buildsize     "41 MB">
  <!ENTITY vim-time          "0.6 SBU">
]>

<sect1 id="vim" xreflabel="Vim-&vim-version;">
  <?dbhtml filename="vim.html"?>

  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date>$Date$</date>
    <keywordset>
      <keyword role="package">vim-&vim-version;.tar</keyword>
      <keyword role="ftpdir">vim</keyword>
    </keywordset>
  </sect1info>

  <title>Vim-&vim-version;</title>

  <indexterm zone="vim">
    <primary sortas="a-Vim">Vim</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to Vim</title>

    <para>The <application>Vim</application> package, which is an
    abbreviation for VI IMproved, contains a <command>vi</command>
    clone with extra features as compared to the original
    <command>vi</command>.</para>

    <para>The default LFS instructions install <application>vim</application>
    as a part of the base system. If you would prefer to link
    <application>vim</application> against <application>X</application>,
    you should recompile <application>vim</application> to enable GUI mode.
    There is no need for special instructions since
    <application>X</application> support is automatically detected.</para>

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Download (HTTP): <ulink url="&vim-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Download (FTP): <ulink url="&vim-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &vim-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &vim-size;</para>
      </listitem>
      <listitem>
        <para>Estimated disk space required: &vim-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimated build time: &vim-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Additional Downloads</bridgehead>
    <itemizedlist spacing='compact'>
      <listitem>
        <para>Translated Vim messages: <ulink
        url="http://ftp.at.vim.org/pub/vim/extra/vim-&vim-version;-lang.tar.gz"/>
      </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Vim Dependencies</bridgehead>

    <bridgehead renderas="sect4">Recommended</bridgehead>
    <para role="recommended"><xref linkend="x-window-system"/></para>

    <bridgehead renderas="sect4">Optional</bridgehead>
    <para role="optional"><xref linkend="gtk2"/> OR
    <xref linkend="lesstif"/>,
    <xref linkend="python"/>,
    <xref linkend="tcl"/>,
    <xref linkend="ruby"/>, and
    <xref linkend="gpm"/></para>

    <para condition="html" role="usernotes">User Notes:
    <ulink url="&blfs-wiki;/vim"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation of Vim</title>

    <note>
      <para>If you recompile <application>Vim</application> to link against
      <application>X</application>, and your <application>X</application>
      libraries are not on the root partition, you will no longer have an editor
      for use in emergencies. You may choose to install an additional editor,
      not link <application>Vim</application> against
      <application>X</application>, or move the current <command>vim</command>
      executable to the <filename class="directory">/bin</filename> directory
      under a different name such as <filename>vi</filename>.</para>
    </note>

    <para>If desired, unpack the translated messages archive:</para>

<screen><userinput>tar -xf ../vim-&vim-version;-lang.tar.gz --strip-components=1</userinput></screen>

    <para>Install <application>Vim</application> by running the following
    commands:</para>

<screen><userinput>echo '#define SYS_VIMRC_FILE "/etc/vimrc"' &gt;&gt; src/feature.h &amp;&amp;
echo '#define SYS_GVIMRC_FILE "/etc/gvimrc"' &gt;&gt; src/feature.h &amp;&amp;
./configure --prefix=/usr --with-features=huge &amp;&amp;
make</userinput></screen>

    <para>Now, as the <systemitem class="username">root</systemitem> user:</para>

<screen role="root"><userinput>make install</userinput></screen>

    <para>In UTF-8 locales, the <command>vimtutor</command> program tries to
    convert the tutorials from ISO-8859-1 to UTF-8. Since some tutorials are
    not in ISO-8859-1, the text in them is thus made unreadable. If you
    unpacked the <filename>vim-&vim-version;-lang.tar.gz</filename> archive and
    are going to use a UTF-8 based locale, remove non-ISO-8859-1 tutorials.  An
    English tutorial will be used instead.</para>
                        
<screen><userinput>rm -f /usr/share/vim/vim64/tutor/tutor.{gr,pl,ru,sk}
rm -f /usr/share/vim/vim64/tutor/tutor.??.*</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Command Explanations</title>

    <para><parameter>--with-features=huge</parameter>: This switch enables all
    the additional features available in <application>Vim</application>.</para>

    <para><option>--enable-gui=no</option>: This will prevent compilation of the
    GUI. <application>Vim</application> will still link against
    <application>X</application> so that some nice eye-candy such as updating the
    title bar of an <application>Xterm</application> window are available.</para>
    
    <para><option>--without-x</option>: If you prefer not to link
    <application>Vim</application> against <application>X</application>, use
    this switch.</para>

  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <para>A list of the reinstalled files, along with their short
    descriptions can be found at <ulink
    url="&lfs-root;/chapter06/vim.html#contents-vim"/>.</para>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directory</segtitle>

      <seglistitem>
        <seg>gview, gvim, gvimdiff, rgview, and rgvim</seg>
        <seg>None</seg>
        <seg>/usr/share/vim</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="gview">
        <term><command>gview</command></term>
        <listitem>
          <para>starts <command>gvim</command> in read-only mode.</para>
          <indexterm zone="vim gview">
            <primary sortas="b-gview">gview</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gvim">
        <term><command>gvim</command></term>
        <listitem>
          <para>is the editor that runs under <application>X</application>
          and includes a GUI.</para>
          <indexterm zone="vim gvim">
            <primary sortas="b-gvim">gvim</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gvimdiff">
        <term><command>gvimdiff</command></term>
        <listitem>
          <para>edits two or three versions of a file with
          <command>gvim</command> and shows the differences.</para>
          <indexterm zone="vim gvimdiff">
            <primary sortas="b-gvimdiff">gvimdiff</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="rgview">
        <term><command>rgview</command></term>
        <listitem>
          <para>is a restricted version of <command>gview</command>.</para>
          <indexterm zone="vim rgview">
            <primary sortas="b-rgview">rgview</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="rgvim">
        <term><command>rgvim</command></term>
        <listitem>
          <para>is a restricted version of <command>gvim</command>. </para>
          <indexterm zone="vim gvim">
            <primary sortas="b-gvim">gvim</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>

<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY desktop-file-utils-download-http "http://freedesktop.org/software/desktop-file-utils/releases/desktop-file-utils-&desktop-file-utils-version;.tar.gz">
  <!ENTITY desktop-file-utils-download-ftp  " ">
  <!ENTITY desktop-file-utils-md5sum        "2ee84d0de753d4052011714c20d6efae">
  <!ENTITY desktop-file-utils-size          "347 KB">
  <!ENTITY desktop-file-utils-buildsize     "3 MB">
  <!ENTITY desktop-file-utils-time          "less than 0.1 SBU">
]>

<sect1 id="desktop-file-utils"
xreflabel="desktop-file-utils-&desktop-file-utils-version;">
  <?dbhtml filename="desktop-file-utils.html"?>

  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date>$Date$</date>
  </sect1info>

  <title>desktop-file-utils-&desktop-file-utils-version;</title>

  <indexterm zone="desktop-file-utils">
    <primary sortas="a-Desktop-file-utils">Desktop-file-utils</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to desktop-file-utils</title>

    <para>The <application>desktop-file-utils</application> package contains
    command line utilities for working with <ulink
    url="http://www.freedesktop.org/Standards/desktop-entry-spec">desktop
    entries</ulink>. These utilities are used by
    <application>GNOME</application>-2 and other applications
    to manipulate the MIME-types application databases and help
    adhere to the Desktop Entry Specification.</para>

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Download (HTTP): <ulink url="&desktop-file-utils-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Download (FTP): <ulink url="&desktop-file-utils-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &desktop-file-utils-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &desktop-file-utils-size;</para>
      </listitem>
      <listitem>
        <para>Estimated disk space required: &desktop-file-utils-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimated build time: &desktop-file-utils-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">desktop-file-utils Dependencies</bridgehead>

    <bridgehead renderas="sect4">Required</bridgehead>
    <para role="required"><xref linkend="glib2"/></para>

    <bridgehead renderas="sect4">Optional</bridgehead>
    <para role="optional"><xref linkend="emacs"/></para>

    <para condition="html" role="usernotes">User Notes:
    <ulink url="&blfs-wiki;/desktop-file-utils"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation of desktop-file-utils</title>

    <para>Install <application>desktop-file-utils</application> by running the
    following commands:</para>

<screen><userinput>./configure --prefix=/usr &amp;&amp;
make</userinput></screen>

    <para>This package does not come with a test suite.</para>

    <para>Now, as the <systemitem class="username">root</systemitem> user:</para>

<screen role="root"><userinput>make install</userinput></screen>

  </sect2>

  <sect2 role="configuration">
    <title>Configuring desktop-file-utils</title>

    <sect3>
      <title>Configuration Information</title>

      <!-- Background for the XDG_* settings can be found in #2172 -->

      <para>The <ulink
      url="http://freedesktop.org/wiki/Standards/basedir-spec">XDG Base
      Directory</ulink> specification defines the standard locations for
      applications to place data and configuration files. These files can
      be used, for instance, to define the menu structure and menu items
      in a desktop environment.</para>

      <para>The default location for configuration files to be installed
      is <filename class="directory">/etc/xdg</filename>, and the default
      locations for data files are <filename
      class="directory">/usr/local/share</filename> and <filename
      class="directory">/usr/share</filename>. These locations can be
      extended with the environment variables <envar>XDG_CONFIG_DIRS</envar>
      and <envar>XDG_DATA_DIRS</envar>, respectively. The
      <application>GNOME</application>, <application>KDE</application> and
      <application>XFCE</application> environments respect respect these
      settings. Update the <envar>XDG_DATA_DIRS</envar> (if necessary) and
      <envar>XDG_CONFIG_DIRS</envar> environment variables so that the
      additional MIME-types application databases and desktop menu files are
      properly maintained and discovered by adding the following to the
      system-wide or personal profile:</para>

      <para>For <application>GNOME</application>:</para>

<screen><literal>XDG_DATA_DIRS=$GNOME_PREFIX/share:/usr/local/share:/usr/share
XDG_CONFIG_DIRS=&gnome-etc-dir;/xdg:/etc/xdg
export XDG_DATA_DIRS XDG_CONFIG_DIRS</literal></screen>

      <para>For <application>KDE</application>:</para>

<screen><literal>XDG_DATA_DIRS=$KDE_PREFIX/share:/usr/local/share:/usr/share
XDG_CONFIG_DIRS=/etc/kde/xdg:/etc/xdg
export XDG_DATA_DIRS XDG_CONFIG_DIRS</literal></screen>

      <para>For <application>XFCE</application>, the default locations
      should be appropriate if the instructions in the BLFS book were
      followed.</para>

<!-- This ends up messing up the menus and the GNOME and KDE stuff is simply
     not yet interchangeable

      <para>If you're installing both <application>GNOME</application> and
      <application>KDE</application>:</para>

<screen><literal>XDG_DATA_DIRS=$XDG_DATA_DIRS:$GNOME_PREFIX/share:$KDE_PREFIX/share
export XDG_DATA_DIRS</literal></screen>

-->

      <para>When a package installs a <filename>.desktop</filename> file
      to a location in one of the base data directories, the database
      that maps MIME-types to available applications can be updated. For
      instance, the cache file at
      <filename>/usr/share/applications/mimeinfo.cache</filename> can
      be rebuilt by executing the following command as the <systemitem
      class="username">root</systemitem> user:</para>

<screen role="root"><userinput>update-desktop-database /usr/share/applications</userinput></screen>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directories</segtitle>

      <seglistitem>
        <seg>desktop-file-install, desktop-file-validate, and
        update-desktop-database</seg>
        <seg>None</seg>
        <seg>None</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="desktop-file-install">
        <term><command>desktop-file-install</command></term>
        <listitem>
          <para>is used to install a new, or modify an existing desktop file
          entry. It is also used to rebuild or modify the MIME-types
          application database.</para>
          <indexterm zone="desktop-file-utils desktop-file-install">
            <primary sortas="b-desktop-file-install">desktop-file-install</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="desktop-file-validate">
        <term><command>desktop-file-validate</command></term>
        <listitem>
          <para>is used to verify the integrity of a desktop file.</para>
          <indexterm zone="desktop-file-utils desktop-file-validate">
            <primary sortas="b-desktop-file-validate">desktop-file-validate</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="update-desktop-database">
        <term><command>update-desktop-database</command></term>
        <listitem>
          <para>is used to update the MIME-types
          application database.</para>
          <indexterm zone="desktop-file-utils update-desktop-database">
            <primary sortas="b-update-desktop-database">update-desktop-database</primary>
          </indexterm>
          </listitem>
        </varlistentry>
      </variablelist>

  </sect2>

</sect1>

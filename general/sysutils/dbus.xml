<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
   "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY dbus-download-http "http://dbus.freedesktop.org/releases/dbus-&dbus-version;.tar.gz">
  <!ENTITY dbus-download-ftp  " ">
  <!ENTITY dbus-md5sum        "1addd5b600a8a4550766005d1f59401b">
  <!ENTITY dbus-size          "1.6 MB">
  <!ENTITY dbus-buildsize     "34.6 MB">
  <!ENTITY dbus-time          "0.9 SBU">
]>

<sect1 id="dbus" xreflabel="D-BUS-&dbus-version;">
  <?dbhtml filename="dbus.html"?>

  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date>$Date$</date>
  </sect1info>

  <title>D-BUS-&dbus-version;</title>

  <indexterm zone="dbus">
    <primary sortas="a-D-BUS">D-BUS</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to D-BUS</title>

    <para><application>D-BUS</application> is a message bus system, a simple
    way for applications to talk to one another.
    <application>D-BUS</application> supplies both a system daemon (for events
    such as <quote>new hardware device added</quote> or <quote>printer queue
    changed</quote>) and a per-user-login-session daemon (for general IPC needs
    among user applications). Also, the message bus is built on top of a
    general one-to-one message passing framework, which can be used by any two
    applications to communicate directly (without going through the message bus
    daemon).</para>

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Download (HTTP): <ulink url="&dbus-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Download (FTP): <ulink url="&dbus-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &dbus-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &dbus-size;</para>
      </listitem>
      <listitem>
        <para>Estimated disk space required: &dbus-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimated build time: &dbus-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">D-BUS Dependencies</bridgehead>

    <bridgehead renderas="sect4">Optional</bridgehead>
    <para><xref linkend="pkgconfig"/>,
    <xref linkend="expat"/> or <xref linkend="libxml2"/>,
    <xref linkend="glib2"/>,
    <xref linkend="gtk2"/>,
    <xref linkend="qt"/>,
    X (<xref linkend="xorg"/> or <xref linkend="xfree86"/>),
    <xref linkend="gcc"/> (for the Java compiler and tools),
    <ulink url="http://nz.cosc.canterbury.ac.nz/~greg/python/Pyrex/">Pyrex</ulink>,
    <ulink url="http://go-mono.org">Mono</ulink>,
    <xref linkend="doxygen"/> and
    <ulink url="http://cyberelk.net/tim/xmlto/">xmlto</ulink></para>

  </sect2>

  <sect2 role="kernel" id='dbus-kernel'>
    <title>Kernel Configuration</title>

    <para>Ensure the following option is enabled in the kernel configuration
    and recompile the kernel if necessary:</para>

<screen><literal>General Setup
  System V IPC</literal></screen>

    <indexterm zone="dbus dbus-kernel">
      <primary sortas="d-dbus">dbus</primary>
    </indexterm>

  </sect2>

  <sect2 role="installation">
    <title>Installation of D-BUS</title>

    <para>As the <systemitem class="username">root</systemitem> user, create a
    system user and group to handle the system message bus activity:</para>

<screen role="root"><userinput>groupadd -g 18 messagebus &amp;&amp;
useradd -c "D-BUS Message Daemon User" -d /dev/null \
        -u 18 -g messagebus -s /bin/false messagebus</userinput></screen>

    <para>Install <application>D-BUS</application> by running the following
    commands (you may wish to review the output from
    <command>./configure --help</command> first and add any desired parameters
    to the <command>configure</command> command shown below):</para>

<screen><userinput>./configure --prefix=/usr \
            --sysconfdir=/etc \
            --localstatedir=/var &amp;&amp;
make</userinput></screen>

    <para>This package does not come with a test suite.</para>

    <para>Now, as the <systemitem class="username">root</systemitem> user:</para>

<screen role="root"><userinput>make install &amp;&amp;
install -v -m755 -d /usr/share/doc/dbus-0.50 &amp;&amp;
install -v -m644 doc/{TODO,*.{dtd,xml,xsl,html,txt,c}} \
    /usr/share/doc/dbus-0.50</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Command Explanations</title>

    <para><parameter>--localstatedir=/var</parameter>: This parameter causes
    the daemon PID file to be created in
    <filename class="directory">/var/run/dbus</filename> instead of
    <filename class="directory">/usr/var/run/dbus</filename>.</para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuring dbus</title>

    <sect3 id="dbus-config">
      <title>Config Files</title>
      <para><filename>/etc/dbus-1/session.conf</filename>,
      <filename>/etc/dbus-1/system.conf</filename> and
      <filename>/etc/system.d/*</filename></para>

      <indexterm zone="dbus dbus-config">
        <primary sortas="e-etc-dbus-1-session.conf">/etc/dbus-1/session.conf</primary>
      </indexterm>

      <indexterm zone="dbus dbus-config">
        <primary sortas="e-etc-dbus-1/system.conf">/etc/dbus-1/system.conf</primary>
      </indexterm>

      <indexterm zone="dbus dbus-config">
        <primary sortas="e-etc-system.d-star">/etc/system.d/*</primary>
      </indexterm>

    </sect3>

    <sect3><title>Configuration Information</title>

      <para>The configuration files listed above should probably not be
      modified. If changes are required, you should create
      <filename>/etc/dbus-1/session-local.conf</filename> and/or
      <filename>/etc/dbus-1/system-local.conf</filename> and make any 
      desired changes to these files.</para>

    </sect3>

    <sect3  id="dbus-init">
      <title>Boot Script</title>

      <para>To automatically start <command>dbus-daemon</command> when the
      system is rebooted, install the
      <filename>/etc/rc.d/init.d/dbus</filename> bootscript from the
      <xref linkend="intro-important-bootscripts"/> package.</para>

      <indexterm zone="dbus dbus-init">
        <primary sortas="f-dbus">dbus</primary>
      </indexterm>

<screen role="root"><userinput>make install-dbus</userinput></screen>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directories</segtitle>

      <seglistitem>
        <seg>dbus-binding-tool, dbus-cleanup-sockets, dbus-daemon, dbus-launch,
        dbus-monitor, dbus-send and dbus-viewer</seg>
        <seg>libdbus-1.[so,a] and optionally, dbus-1.jar, libdbus-gcj-1.[so,a],
        libdbus-glib-1.[so,a], libdbus-qt-1.[so,a] and
        <application>Python</application> modules</seg>
        <seg>/etc/dbus-1, /usr/include/dbus-1.0, /usr/lib/dbus-1.0,
        /usr/lib/python2.4/site-packages/dbus, /usr/share/dbus-1,
        /usr/share/doc/dbus-&dbus-version; and /var/run/dbus</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="dbus-binding-tool">
        <term><command>dbus-binding-tool</command></term>
        <listitem>
          <para>is used to create header files from
          <application>GLib</application> object files.</para>
          <indexterm zone="dbus dbus-binding-tool">
            <primary sortas="b-dbus-binding-tool">dbus-binding-tool</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="dbus-cleanup-sockets">
        <term><command>dbus-cleanup-sockets</command></term>
        <listitem>
          <para>is used to clean up leftover sockets in a directory.</para>
          <indexterm zone="dbus dbus-cleanup-sockets">
            <primary sortas="b-dbus-cleanup-sockets">dbus-cleanup-sockets</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="dbus-daemon">
        <term><command>dbus-daemon</command></term>
        <listitem>
          <para>is the <application>D-BUS</application> message bus
          daemon.</para>
          <indexterm zone="dbus dbus-daemon">
            <primary sortas="b-dbus-daemon">dbus-daemon</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="dbus-launch">
        <term><command>dbus-launch</command></term>
        <listitem>
          <para>is used to start <command>dbus-daemon</command> from a shell
          script. It  would  normally be called from a user's login
          scripts.</para>
          <indexterm zone="dbus dbus-launch">
            <primary sortas="b-dbus-launch">dbus-launch</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="dbus-monitor">
        <term><command>dbus-monitor</command></term>
        <listitem>
          <para>is used to monitor messages going through a
          <application>D-BUS</application> message bus.</para>
          <indexterm zone="dbus dbus-monitor">
            <primary sortas="b-dbus-monitor">dbus-monitor</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="dbus-send">
        <term><command>dbus-send</command></term>
        <listitem>
          <para>is used to send a message to a <application>D-BUS</application>
          message bus.</para>
          <indexterm zone="dbus dbus-send">
            <primary sortas="b-dbus-send">dbus-send</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="dbus-viewer">
        <term><command>dbus-viewer</command></term>
        <listitem>
          <para>is a graphical <application>D-BUS</application> frontend
          utility.</para>
          <indexterm zone="dbus dbus-viewer">
            <primary sortas="b-dbus-viewer">dbus-viewer</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libdbus-1">
        <term><filename class='libraryfile'>libdbus-1.[so,a]</filename></term>
        <listitem>
          <para>contains the API functions used by the
          <application>D-BUS</application> message daemon.
          <application>D-BUS</application> is first a library that provides
          one-to-one communication between any two applications;
          <command>dbus-daemon</command> is an application that uses this
          library to implement a message bus daemon.</para>
          <indexterm zone="dbus libdbus-1">
            <primary sortas="c-libdbus-1">libdbus-1.[so,a]</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>

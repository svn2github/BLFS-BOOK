<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
   "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY thunderbird-download-http     "http://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/&thunderbird-version;/source/thunderbird-&thunderbird-version;-source.tar.bz2">
  <!ENTITY thunderbird-download-ftp      "ftp://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/&thunderbird-version;/source/thunderbird-&thunderbird-version;-source.tar.bz2">
  <!ENTITY thunderbird-md5sum            "a0ddcc8bd5ee2c9be724b6963ad27111">
  <!ENTITY thunderbird-size              "33.3 MB">
  <!ENTITY thunderbird-buildsize         "560 MB">
  <!ENTITY thunderbird-time              "10.3 SBU">

  <!ENTITY thunderbird-enigmail-version  "0.92.0">
  <!ENTITY thunderbird-enigmail-download "http://downloads.mozdev.org/enigmail/src/enigmail-&thunderbird-enigmail-version;.tar.gz">
  <!ENTITY thunderbird-enigmail-md5sum   "50c369ce6d6fcb2d275cd30319a601ff">

  <!ENTITY thunderbird-ipc-version       "1.1.3">
  <!ENTITY thunderbird-ipc-download      "http://downloads.mozdev.org/enigmail/src/ipc-&thunderbird-ipc-version;.tar.gz">
  <!ENTITY thunderbird-ipc-md5sum        "64ba4c6e3b52568468c4f6680ec7e679">
]>

<sect1 id="thunderbird" xreflabel="Thunderbird-&thunderbird-version;">
  <?dbhtml filename="thunderbird.html" ?>

  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date>$Date$</date>
  </sect1info>

  <title>Thunderbird-&thunderbird-version;</title>

  <indexterm zone="thunderbird">
    <primary sortas="a-Thunderbird">Thunderbird</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to Thunderbird</title>

    <para><application>Thunderbird</application> is a stand-alone
    mail/news client based on the <application>Mozilla</application>
    codebase.</para>

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Download (HTTP): <ulink url="&thunderbird-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Download (FTP): <ulink url="&thunderbird-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &thunderbird-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &thunderbird-size;</para>
      </listitem>
      <listitem>
        <para>Estimated disk space required: &thunderbird-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimated build time: &thunderbird-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Additional Downloads</bridgehead>

    <para>To enable the <application>Enigmail</application> extension to the
    <application>Thunderbird</application> mail client, you'll need to download
    the two tarballs below. The <application>Enigmail</application> extension
    allows users to access the authentication and encryption features provided
    by the <application>GnuPG</application> package.</para>

    <itemizedlist spacing='compact'>
      <listitem>
        <para><ulink url="&thunderbird-enigmail-download;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum (Enigmail): &thunderbird-enigmail-md5sum;</para>
      </listitem>
      <listitem>
        <para><ulink url="&thunderbird-ipc-download;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum (IPC): &thunderbird-ipc-md5sum;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Thunderbird Dependencies</bridgehead>

    <bridgehead renderas="sect4">Required</bridgehead>
    <para><xref linkend="zip"/>,
    <xref linkend="gtk2"/> and
    <xref linkend="libidl"/></para>

    <bridgehead renderas="sect4">Recommended</bridgehead>
    <para><xref linkend="gnupg"/> (for the <application>Enigmail</application>
    extension)</para>

    <bridgehead renderas="sect4">Optional</bridgehead>
    <para><xref linkend="libjpeg"/>,
    <xref linkend="unzip"/>,
    <xref linkend="gnome-vfs"/>,
    <xref linkend="libgnome"/>,
    <xref linkend="mitkrb"/> or <xref linkend="heimdal"/>
    (for the GSSAPI libraries),
    <xref linkend="doxygen"/>,
    <ulink url="http://xprint.mozdev.org/">Xprint</ulink>,
    <ulink url="http://perens.com/FreeSoftware/">Electric Fence</ulink>
    and <ulink url="http://cairographics.org/">Cairo</ulink></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation of Thunderbird</title>

    <para>The configuration of <application>Thunderbird</application> is
    very similar to <xref linkend="mozilla"/> and hence the options will not
    be discussed. Refer to the <xref linkend="mozilla"/> instructions for
    explanations and additional configuration information.</para>

    <para>Compile <application>Thunderbird</application> by
    running the following commands:</para>

<screen><userinput>export MOZILLA_OFFICIAL="1" &amp;&amp;
export BUILD_OFFICIAL="1" &amp;&amp;
export MOZ_THUNDERBIRD="1" &amp;&amp;

sed -i -e 's/$(destdir)$(bindir)/$(DESTDIR)$(mozappdir)/' \
       mail/app/Makefile.in &amp;&amp;
 
./configure --prefix=/usr \
            --with-default-mozilla-five-home=/usr/lib/thunderbird-&thunderbird-version; \
            --with-system-zlib \
            --with-system-png \
            --enable-application=mail \
            --enable-default-toolkit=gtk2 \
            --enable-extensions=wallet,spellcheck,xmlextras,webservices \
            --enable-crypto \
            --enable-xft \
            --enable-xinerama \
            --enable-optimize \
            --enable-reorder \
            --enable-strip \
            --enable-cpp-rtti \
            --enable-single-profile \
            --enable-necko-protocols=http,file,jar,viewsource,res,data \
            --enable-image-decoders=default,-xbm \
            --disable-freetype2 \
            --disable-accessibility \
            --disable-debug \
            --disable-tests \
            --disable-logging \
            --disable-pedantic \
            --disable-installer \
            --disable-profilesharing \
            --disable-mathml \
            --disable-oji \
            --disable-plugins \
            --disable-necko-disk-cache &amp;&amp;
make</userinput></screen>

    <para>You should add the <option>--with-system-jpeg</option> switch
    to the <command>configure</command> script if you have
    <application>libjpeg</application> installed.</para>

    <para>If you're building the <application>Enigmail</application> extension,
    execute the following steps:</para>

<screen><userinput>tar -zxf ../enigmail-&thunderbird-enigmail-version;.tar.gz -C extensions &amp;&amp;
tar -zxf ../ipc-&thunderbird-ipc-version;.tar.gz -C extensions &amp;&amp;
build/autoconf/make-makefile extensions/ipc extensions/enigmail &amp;&amp;
make -C extensions/ipc &amp;&amp;
make -C extensions/enigmail</userinput></screen>

    <para>Install <application>Thunderbird</application> by running the following
    commands as the <systemitem class="username">root</systemitem> user:</para>

<screen role="root"><userinput>make install &amp;&amp;
install -d /usr/include/thunderbird-&thunderbird-version;/nss &amp;&amp;
cp -Lf dist/private/nss/*.h dist/public/nss/*.h \
    /usr/include/thunderbird-&thunderbird-version;/nss</userinput></screen>

    <para>If you're installing the <application>Enigmail</application> extension,
    issue the following commands as the <systemitem
    class="username">root</systemitem> user:</para>

<screen role="root"><userinput>make -C extensions/ipc install &amp;&amp;
make -C extensions/enigmail install</userinput></screen>

    <para>To enable multi-user operation, execute the following as the
    <systemitem class="username">root</systemitem> user:</para>

<screen role="root"><userinput>cd /usr/lib/thunderbird-&thunderbird-version; &amp;&amp;
export LD_LIBRARY_PATH="$PWD" &amp;&amp;
export MOZILLA_FIVE_HOME="$PWD" &amp;&amp;
./regxpcom &amp;&amp;
./regchrome &amp;&amp;
touch `find . -name *.rdf`</userinput></screen>

    <note>
      <para>You should run <command>/usr/bin/thunderbird</command> once as
      the <systemitem class="username">root</systemitem> user (or any user
      with write privileges) to create some necessary additional files in
      the <filename class='directory'>/usr</filename> hierarchy.</para>
    </note>

    <para>Finally, unset the build variables from the unprivileged user's
    environment:</para>
    
<screen><userinput>unset MOZILLA_OFFICIAL &amp;&amp;
unset BUILD_OFFICIAL &amp;&amp;
unset MOZ_THUNDERBIRD</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Command Explanations</title>

    <para><command>sed -i -e 's/$(destdir)$(bindir)/$(DESTDIR)$(mozappdir)/'
    mail/app/Makefile.in</command>: Correct the installation location of the
    <filename class='directory'>defaults</filename> directory.</para>

  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Program</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directories</segtitle>

      <seglistitem>
        <seg>thunderbird and thunderbird-config</seg>
        <seg>Numerous libraries, email/newsgroups components, plugins,
        extensions, and helper modules installed in <filename
        class='directory'>/usr/lib/thunderbird-&thunderbird-version;</filename>
        </seg>
        <seg>/usr/include/thunderbird-&thunderbird-version;,
        /usr/lib/thunderbird-&thunderbird-version;, and
        /usr/share/idl/thunderbird-&thunderbird-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="thunderbird-prog">
        <term><command>thunderbird</command></term>
        <listitem>
          <para>is <application>Mozilla</application>'s next-generation
          email and newsgroup client.</para>
          <indexterm zone="thunderbird thunderbird-prog">
            <primary sortas="b-thunderbird">thunderbird</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>

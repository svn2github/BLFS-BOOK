<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY thunderbird-download-http
  "http://releases.mozilla.org/pub/mozilla.org/thunderbird/releases/&thunderbird-version;/source/thunderbird-&thunderbird-version;.source.tar.bz2">
  <!ENTITY thunderbird-download-ftp
  "ftp://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/&thunderbird-version;/source/thunderbird-&thunderbird-version;.source.tar.bz2">
  <!ENTITY thunderbird-md5sum            "7b30b72472a65bce74ba0ae60e4d4e6c">
  <!ENTITY thunderbird-size              "97 MB">
  <!ENTITY thunderbird-buildsize         "3.1 GB (41 MB installed)">
  <!ENTITY thunderbird-time              "26 SBU">

]>

<sect1 id="thunderbird" xreflabel="Thunderbird-&thunderbird-version;">
  <?dbhtml filename="thunderbird.html" ?>

  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date>$Date$</date>
  </sect1info>

  <title>Thunderbird-&thunderbird-version;</title>

  <indexterm zone="thunderbird">
    <primary sortas="a-Thunderbird">Thunderbird</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to Thunderbird</title>

    <para>
      <application>Thunderbird</application> is a stand-alone mail/news client
      based on the <application>Mozilla</application> codebase.
    </para>

    &lfs71_checked;

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Download (HTTP): <ulink url="&thunderbird-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Download (FTP): <ulink url="&thunderbird-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Download MD5 sum: &thunderbird-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Download size: &thunderbird-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimated disk space required: &thunderbird-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimated build time: &thunderbird-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Additional Downloads</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Required patch:
          <ulink url="&patch-root;/thunderbird-&thunderbird-version;_gcc-4.7-1.patch"/>
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Thunderbird Dependencies</bridgehead>

    <bridgehead renderas="sect4">Required</bridgehead>
    <para role="required">
      <xref linkend="alsa-lib"/>,
      <xref linkend="gtk2"/>,
      <xref linkend="zip"/> and
      <xref linkend="unzip"/>
    </para>

    <bridgehead renderas="sect4">Optional</bridgehead>
    <para role="optional">
      <xref linkend="dbus-glib"/>,
      <xref linkend="doxygen"/>,
      <xref linkend="gnome-vfs"/> and <xref linkend="libgnomeui"/>
      (for integration with the old version of <application>Gnome</application>),
      <xref linkend="libnotify"/>,
      <xref linkend="nss"/>,
      <xref linkend="nspr"/>,
      <xref linkend="startup-notification"/>,
      <xref linkend="sqlite"/>,
      <xref linkend="yasm"/> (or <xref linkend="libvpx"/>),
      <ulink url="http://hunspell.sourceforge.net/">Hunspell</ulink>,
      <ulink url="http://libevent.org/">Libevent</ulink>,
      <ulink url="http://www.valgrind.org/">Valgrind</ulink> (only for testing
      the jemalloc code) and
      <xref linkend="wget"/>
    </para>

    <para condition="html" role="usernotes">
      User Notes: <ulink url="&blfs-wiki;/Thunderbird"/>
    </para>
  </sect2>

  <sect2 role="installation">
    <title>Installation of Thunderbird</title>

    <para>
      The configuration of <application>Thunderbird</application> is
      accomplished by creating a <filename>mozconfig</filename> file containing
      the desired configuration options. A default
      <filename>mozconfig</filename> is created below. To see the entire list of
      available configuration options (and a brief description of each), issue
      <command>./configure --help</command>. Create the file with the following
      command:
    </para>

<screen><userinput>cat &gt; mozconfig &lt;&lt; "EOF"
# If you have a multicore machine you can speed up the build by running
# several jobs at once, but if you have a single core, delete this line:
mk_add_options MOZ_MAKE_FLAGS="-j4"

# If you have installed Yasm delete this option:
ac_add_options --disable-webm

# If you have installed DBus-Glib delete this option:
ac_add_options --disable-dbus

# If you have installed wireless-tools delete this option:
ac_add_options --disable-necko-wifi

# If you have installed libnotify delete this option:
ac_add_options --disable-libnotify

# Uncomment these if you have installed them:
# ac_add_options --enable-startup-notification
# ac_add_options --enable-system-hunspell
# ac_add_options --enable-system-sqlite
# ac_add_options --with-system-libevent
# ac_add_options --with-system-libvpx
# ac_add_options --with-system-nspr
# ac_add_options --with-system-nss

mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/thunderbuild
ac_add_options --disable-crashreporter
ac_add_options --disable-debug
ac_add_options --disable-installer
ac_add_options --disable-static
ac_add_options --disable-tests
ac_add_options --disable-updater
ac_add_options --enable-official-branding
ac_add_options --enable-shared
ac_add_options --enable-system-cairo
ac_add_options --enable-system-ffi
ac_add_options --with-pthreads
ac_add_options --with-system-jpeg
ac_add_options --with-system-png
ac_add_options --with-system-zlib
EOF</userinput></screen>

    <para>
      Compile <application>Thunderbird</application> by issuing the following
      commands:
    </para>

<screen><userinput>patch -p1 &lt; ../thunderbird-&thunderbird-version;_gcc-4.7-1.patch &amp;&amp;
make -f client.mk &amp;&amp;
make -C thunderbuild/mail/installer</userinput></screen>

    <para>
      This package does not come with a test suite.
    </para>

    <para>
      Install <application>Thunderbird</application> by running the following
      commands as the <systemitem class="username">root</systemitem> user:
    </para>

<screen role="root"><userinput>mkdir -p /usr/lib/thunderbird-&thunderbird-version; &amp;&amp;
tar xf thunderbuild/mozilla/dist/thunderbird-&thunderbird-version;.en-US.linux-$(uname -m).tar.bz2 \
  -C /usr/lib/thunderbird-&thunderbird-version; --strip-components=1 &amp;&amp;
ln -s ../lib/thunderbird-&thunderbird-version;/thunderbird /usr/bin</userinput></screen>
  </sect2>

  <sect2 role="commands">
    <title>Command Explanations</title>

    <para>
      <command>patch -p1 &lt;
      ../thunderbird-&thunderbird-version;_gcc-4.7-1.patch</command>: This
      patch fixes various files to ensure that
      <application>Thunderbird</application> compiles with      
      <application>GCC 4.7</application>.
    </para>

    <para>
      <command>make -f client.mk</command>: Mozilla products are packaged to
      allow the use of a configuration file which can be used to pass the
      configuration settings to the <command>configure</command> command.
      <command>make</command> uses the <filename>client.mk</filename> file to
      get initial configuration and setup parameters.
    </para>

    <para>
      <command>make -C thunderbuild/mail/installer</command>: this runs make in
      the <filename class="directory">thunderbuild/mail/installer</filename>
      folder. This gathers together all the parts of
      <application>Thunderbird</application> and compresses them into a tarball.
    </para>

    <para>
      <command>tar -xfv thunderbuild/mozilla/dist ...</command>: This untars
      <application>Thunderbird</application>, the <option>-C</option> option
      uncompresses the files in
      <filename class="directory">/usr/lib/thunderbird-&thunderbird-version;</filename>.
      The <option>--strip-components=1</option> option removes the leading
      'thunderbird' directory from the filenames, allowing us to untar it into a
      versioned directory.
    </para>
  </sect2>

  <sect2 role="configuration">
    <title>Configuring Thunderbird</title>

    <sect3><title>Configuration Information</title>

      <para>
        If your Window or Desktop Manager does not allow you to configure a
        default browser, you can add a configuration parameter to
        <application>Thunderbird</application> so that a browser will start when
        when you click on an Internet/intranet/local URL. The procedure to check
        or modify any of the configuration parameters is quite simple and the
        instructions here can be used to view or modify any of the parameters.
      </para>

      <para>
        First, open the configuration dialog by opening the <quote>Edit</quote>
        drop-down menu. Choose <quote>Preferences</quote> and then click on the
        <quote>Advanced</quote> icon on the top menu bar. Choose the
        <quote>General</quote> tab and click on the <quote>Config Editor</quote>
        button. This will display a list of the configuration preferences and
        information related to each one. You can use the <quote>Filter:</quote>
        bar to enter search criteria and narrow down the listed items. Changing
        a preference can be done using two methods. One, if the preference has a
        boolean value (True/False), simply double-click on the preference to
        toggle the value and two, for other preferences simply right-click on
        the desired line, choose <quote>Modify</quote> from the menu and change
        the value. Creating new preference items is accomplished in the same
        way, except choose <quote>New</quote> from the menu and provide the
        desired data into the fields when prompted.
      </para>

      <para>
        The configuration preference item you need to check so that
        <application>Thunderbird</application> uses a specified browser is the
        <parameter>network.protocol-handler.app.http</parameter> which should be
        set to the path of the desired browser, e.g.
        <option>/usr/bin/firefox</option>.
      </para>

    <tip>
      <para>
        There is a multitude of configuration parameters you can tweak to
        customize <application>Thunderbird</application>. A very extensive, but
        not so up-to-date list of these parameters can be found at
        <ulink url="http://preferential.mozdev.org/preferences.html"/>.
      </para>
    </tip>

    <para>
      If you use a desktop environment like <application>Gnome</application> or
      <application>KDE</application> you may wish to create a
      <filename>thunderbird.desktop</filename> file so that
      <application>Thunderbird</application> appears in the panel's menus. If
      you didn't enable startup-notification in your mozconfig change the
      StartupNotify line to false. As the
      <systemitem class="username">root</systemitem> user:
    </para>

<screen role="root"><userinput>cat &gt; /usr/share/applications/thunderbird.desktop &lt;&lt; "EOF"
[Desktop Entry]
Encoding=UTF-8
Type=Application
Name=Thunderbird
Comment=Fetch Your Email
Icon=thunderbird
Exec=thunderbird
Categories=Network;GTK;Application;Email;News;
StartupNotify=true
Terminal=false
EOF
ln -sv -f /usr/lib/thunderbird-&thunderbird-version;/chrome/icons/default/default256.png \
  /usr/share/pixmaps/thunderbird.png</userinput></screen>
    </sect3>
  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directories</segtitle>

      <seglistitem>
        <seg>thunderbird</seg>
        <seg>
          Numerous libraries, email/newsgroups components, plugins, extensions,
          and helper modules installed in <filename
          class="directory">/usr/lib/thunderbird-&thunderbird-version;</filename>
        </seg>
        <seg>/usr/lib/thunderbird-&thunderbird-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="thunderbird-prog">
        <term><command>thunderbird</command></term>
        <listitem>
          <para>
            is <application>Mozilla</application>'s next-generation email and
            newsgroup client.
          </para>
          <indexterm zone="thunderbird thunderbird-prog">
            <primary sortas="b-thunderbird">thunderbird</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>

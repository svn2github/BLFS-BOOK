<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY gnucash-download-http  "http://www.gnucash.org/pub/gnucash/sources/stable/gnucash-&gnucash-version;.tar.bz2">
  <!ENTITY gnucash-download-ftp   "ftp://ftp.at.gnucash.org/pub/gnucash/sources/stable/2.2.4/gnucash-&gnucash-version;.tar.bz2">
  <!ENTITY gnucash-src-md5sum     "f521cea858ee7223325114ec98de86ca">
  <!ENTITY gnucash-size           "6.8 MB">
  <!ENTITY gnucash-buildsize      "163 MB (additional 50 MB if running test suite; additional 124 MB for API docs)">
  <!ENTITY gnucash-time           "3.1 SBU (additional 1.8 SBU to run the test suite; additional 0.3 SBU for docs)">
  <!ENTITY gnucash-docs-version   "2.2.0">
  <!ENTITY gnucash-docs-download  "http://www.gnucash.org/pub/gnucash/sources/stable/gnucash-docs-&gnucash-docs-version;.tar.gz">
  <!ENTITY gnucash-docs-md5sum    "97a29e499baca1807a3944ae3c0ad61e">
  <!ENTITY gnucash-docs-size      "10.0 MB">
  <!ENTITY gnucash-docs-buildsize "27 MB (additional 41 MB for html and pdf)">
  <!ENTITY gnucash-docs-time      "less than 0.1 SBU (additional 0.4 SBU for html and pdf)">
]>

<sect1 id="gnucash" xreflabel="GnuCash-&gnucash-version;">
  <?dbhtml filename="gnucash.html" ?>

  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date>$Date$</date>
  </sect1info>

  <title>GnuCash-&gnucash-version;</title>

  <indexterm zone="gnucash">
    <primary sortas="a-GnuCash">GnuCash</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to GnuCash</title>

    <para><application>GnuCash</application> is a personal finance
    manager.</para>

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Download (HTTP): <ulink url="&gnucash-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Download (FTP): <ulink url="&gnucash-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &gnucash-src-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &gnucash-size;</para>
      </listitem>
      <listitem>
        <para>Estimated disk space required: &gnucash-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimated build time: &gnucash-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Additional Downloads</bridgehead>
    <itemizedlist spacing='compact'>
      <listitem>
        <para>Help documentation: <ulink url="&gnucash-docs-download;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &gnucash-docs-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &gnucash-docs-size;</para>
      </listitem>
      <listitem>
        <para>Estimated disk space required: &gnucash-docs-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimated build time: &gnucash-docs-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">GnuCash Dependencies</bridgehead>

    <bridgehead renderas="sect4">Required</bridgehead>
    <para role="required"><xref linkend="guile"/>,
    <xref linkend="slib"/>,
    <xref linkend="goffice"/>, and
    <xref linkend="gtkhtml"/></para>

    <bridgehead renderas="sect4">Optional</bridgehead>
    <para role="optional"><xref linkend="postgresql"/>,
    <ulink url="ftp://ftp.gnu.org/pub/gnu/guile/">Guile-www</ulink>, and
    <ulink url="http://perens.com/FreeSoftware/">Electric Fence</ulink></para>

    <bridgehead renderas="sect4">Optional (Required for the Help System)</bridgehead>
    <para role="optional"><xref linkend="scrollkeeper"/> and
    <xref linkend="yelp"/> (run-time requirement to view the Help documents)</para>

    <bridgehead renderas="sect4">Optional (for On-Line Banking)</bridgehead>
    <para role="optional"><ulink
    url="http://libofx.sourceforge.net/">LibOFX</ulink>
    (requires <xref linkend="opensp"/> and <xref linkend="curl"/>),
    <ulink url="http://sourceforge.net/projects/ktoblzcheck">KtoBlzCheck</ulink>,
    and <ulink url="http://www.aquamaniac.de/aqbanking/">AqBanking</ulink>
    (requires <ulink
    url="http://gwenhywfar.sourceforge.net/">Gwenhywfar</ulink>
    and <ulink url="http://www.libchipcard.de/">libchipcard3</ulink>)</para>

    <para condition="html" role="usernotes">User Notes:
    <ulink url="&blfs-wiki;/gnucash"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation of GnuCash</title>

    <para>Install <application>GnuCash</application> by running the following
    commands:</para>

<screen><userinput>sed -i 's|xml::${sysconfdir}|xml::&gnome-etc-dir;|' configure &amp;&amp;

./configure \
    --prefix=/usr \
    --sysconfdir=/etc \
    --libexecdir=/usr/lib \
    --with-gconf-schema-file-dir=&gnome-etc-dir;/gconf/schemas &amp;&amp;
make</userinput></screen>

    <para>If you wish to create the API documentation in HTML format, you must
    have <xref linkend="doxygen"/> and <xref linkend="graphviz"/> installed,
    then issue: <command>make doc</command>. If you wish to create the API
    Design Guide in several formats, you must have <xref linkend="tetex"/> or
    <xref linkend="texlive"/> installed and issue:
    <command>make -C src/doc/design html pdf ps</command>.</para>

    <para>To test the results, issue: <command>make check</command>. All tests
    should pass. An easy way to look at the results of the tests is to issue
    <command>grep -A1 ============== check.log</command> (this is assuming you
    redirected the output from the tests to the indicated filename).</para>

    <para>Now, as the <systemitem class="username">root</systemitem> user:</para>

<screen role='root'><userinput>make install &amp;&amp;

mv -v /usr/share/gnucash/doc /usr/share/doc/gnucash-&gnucash-version; &amp;&amp;
ln -v -s ../doc/gnucash-&gnucash-version; /usr/share/gnucash/doc &amp;&amp;

for FILENAME in doc/{misc*,gnome*,generic*,build*}.txt \
                doc/{gtkrc*,TRANSLATION_HOWTO,README.translator.txt} \
                doc/README.{build-system,OFX,HBCI}
do
    install -v -m644 ${FILENAME} /usr/share/doc/gnucash-&gnucash-version;
done &amp;&amp;

install -v -m755 -d /usr/share/doc/gnucash-&gnucash-version;/api/engine &amp;&amp;
install -v -m644    src/doc/{TODO*,*.txt,*.html} \
                    /usr/share/doc/gnucash-&gnucash-version;/api &amp;&amp;
install -v -m644    src/engine/*.txt \
                    /usr/share/doc/gnucash-&gnucash-version;/api/engine</userinput></screen>

    <para>If you built the API HTML or Design Guide documentation, issue the
    following commands (modified as necessary, depending on what docs are
    being installed) as the <systemitem class="username">root</systemitem>
    user:</para>

<screen role='root'><userinput>install -v -m755 -d /usr/share/doc/gnucash-&gnucash-version;/{design,api}/html &amp;&amp;
install -v -m644    src/doc/design/gnucash-design.html/* \
                    /usr/share/doc/gnucash-&gnucash-version;/design/html &amp;&amp;
install -v -m644    src/doc/design/gnucash-design.{pdf,ps,dvi} \
                    /usr/share/doc/gnucash-&gnucash-version;/design &amp;&amp;
install -v -m644    src/doc/html/* \
                    /usr/share/doc/gnucash-&gnucash-version;/api/html</userinput></screen>

    <para>If you want to install the Help documentation system, you must have
    <xref linkend="scrollkeeper"/> installed. Then unpack the additional
    tarball, change into the
    <filename class='directory'>gnucash-docs-&gnucash-docs-version;</filename>
    source directory and issue the following commands as an unprivileged
    user:</para>

<screen><userinput>./configure --prefix=/usr \
            --localstatedir=/var/lib &amp;&amp;
make</userinput></screen>

    <para>HTML versions of the Help Manual and Users Guide can be created if
    the DocBook XML tools are installed (<xref linkend="libxslt"/>,
    <xref linkend="DocBook"/> and <xref linkend="docbook-xsl"/>). A PDF version
    of the Users Guide can be created if you have <xref linkend="docbook-utils"/>
    and <xref linkend="jadetex"/> installed. Issue the following commands to
    create the documentation (modify as appropriate for your desires):</para>

<screen><userinput>make -C help  html &amp;&amp;
make -C guide html &amp;&amp;
make -C guide pdf</userinput></screen>

    <para>Now, as the <systemitem class="username">root</systemitem> user:</para>

<screen role='root'><userinput>make install</userinput></screen>

    <para>If you built the Help Manual or Users Guide, install them using the
    following commands as the <systemitem class="username">root</systemitem>
    user (modify as necessary):</para>

<screen role='root'><userinput>install -v -m755 -d /usr/share/doc/gnucash-&gnucash-docs-version;/{users_guide,help} &amp;&amp;
cp -v -R            help/C/gnucash-help/* \
                    /usr/share/doc/gnucash-&gnucash-docs-version;/help &amp;&amp;
cp -v -R            guide/C/gnucash-guide/* \
                    /usr/share/doc/gnucash-&gnucash-docs-version;/users_guide &amp;&amp;
install -v -m644    guide/C/gnucash-guide.pdf \
                    /usr/share/doc/gnucash-&gnucash-docs-version;</userinput></screen>

    <para>Note that you must have <xref linkend="yelp"/> installed in order to
    view the Help documents using the default
    <application>GnuCash</application> method.</para>

  </sect2>

  <sect2 role="commands">
    <title>Command Explanations</title>

    <para><command>sed -i 's|xml::${sysconfdir}|xml::&gnome-etc-dir;|'
    configure</command>: This command is used because the location of the
    <application>GConf</application> source database is hard-coded into
    the <command>configure</command> script as
    <filename class='directory'><envar>$sysconfdir</envar>/gconf</filename>
    (rendering the <option>--with-gconf-source</option> parameter useless).
    The modification ensures that the <application>GConf</application> database
    is properly updated while still allowing the package configuration files
    to be installed in
    <filename class='directory'>/etc/gnucash</filename>.</para>

    <para><parameter>--sysconfdir=/etc</parameter>: This installs configuration
    files in <filename class='directory'>/etc/gnucash</filename> instead of
    <filename class='directory'>/usr/etc/gnucash</filename>.</para>

    <para><parameter>--with-gconf-schema-file-dir=&gnome-etc-dir;/gconf/schemas</parameter>:
    This parameter ensures that the <application>GConf</application> schema
    files are installed in the proper location instead of
    <filename class='directory'>/etc/gconf</filename>.</para>

    <para><command>mv -v /usr/share/gnucash/doc
    /usr/share/doc/gnucash-&gnucash-version;</command> and
    <command>ln -v -s ../doc/gnucash-&gnucash-version;
    /usr/share/gnucash/doc</command>: These commands are used to relocate the
    documentation files to the customary location and create a symbolic link
    to the original location.</para>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../xincludes/scrollkeeper-dir.xml"/>

    <para><option>--enable-sql</option>: This parameter is required if you want
    to build in SQL support using <application>PostgreSQL</application>.</para>

    <para><option>--enable-hbci</option>: This parameter is required if you
    want to build in on-line banking support using
    <application>AqBanking</application>. See
    <filename>doc/README.HBCI</filename> in the
    <application>GnuCash</application> source tree for complete
    information.</para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuring GnuCash</title>

    <sect3>
      <title>Configuration Information</title>

      <para>If you wish to use <application>GnuCash</application> to retrieve
      stock price quotes, you'll need to
      install the following <application>Perl</application> modules:
      <xref linkend="perl-lwp"/>,
      <xref linkend="perl-date-manip"/>,
      <xref linkend="perl-html-parser"/>,
      <xref linkend="perl-html-tableextract"/>,
      <xref linkend="perl-crypt-ssleay"/>, and
      <xref linkend="perl-finance-quote"/>. Alternatively, you can run the
      <command>/usr/bin/gnc-fq-update</command> script as the
      <systemitem class="username">root</systemitem> user.</para>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directories</segtitle>

      <seglistitem>
        <seg>gnc-fq-check, gnc-fq-dump, gnc-fq-helper, gnc-fq-update,
        gnc-test-env, gnucash, gnucash-bin, gnucash-env, gnucash-make-guids,
        gnucash-valgrind, and update-gnucash-gconf</seg>
        <seg>libgnc-backend-file-utils.so, libgnc-backend-postgres.so,
        libgnc-business-ledger.so,libgnc-core-utils.so, libgnc-gnome.so,
        libgnc-module.so, libgnc-qof.so and numerous support libraries
        installed in
        <filename class='directory'>/usr/lib/gnucash</filename></seg>
        <seg>/etc/gnucash,
        /usr/include/gnucash,
        /usr/lib/gnucash,
        and the following subdirectories of /usr/share/:
        doc/gnucash-&gnucash-version;,
        gnome/help/gnucash,
        gnucash,
        omf/gnucash-docs, and
        /xml/gnucash</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="gnucash-prog">
        <term><command>gnucash</command></term>
        <listitem>
          <para>is a personal finance manager.</para>
          <indexterm zone="gnucash gnucash-prog">
            <primary sortas="b-gnucash">gnucash</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>

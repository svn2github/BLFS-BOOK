<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY gnome-session-download-http "&gnome-download-http;/gnome-session/&gnome-version;/gnome-session-&gnome-session-version;.tar.xz">
  <!ENTITY gnome-session-download-ftp  "&gnome-download-ftp;/gnome-session/&gnome-version;/gnome-session-&gnome-session-version;.tar.xz">
  <!ENTITY gnome-session-md5sum        "05012cdf82e48feab17b5bc1804e37cf">
  <!ENTITY gnome-session-size          "685 KB">
  <!ENTITY gnome-session-buildsize     "19 MB">
  <!ENTITY gnome-session-time          "0.3 SBU">
]>

<sect1 id="gnome-session" xreflabel="GNOME Session-&gnome-session-version;">
  <?dbhtml filename="gnome-session.html"?>

  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date>$Date$</date>
  </sect1info>

  <title>GNOME Session-&gnome-session-version;</title>

  <indexterm zone="gnome-session">
    <primary sortas="a-GNOME Session">GNOME Session</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to GNOME Session</title>

    <para>The <application>GNOME Session</application> package contains
    the <application>GNOME</application> session manager.</para>

    &lfs70_checked;

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Download (HTTP): <ulink url="&gnome-session-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Download (FTP): <ulink url="&gnome-session-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &gnome-session-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &gnome-session-size;</para>
      </listitem>
      <listitem>
        <para>Estimated disk space required: &gnome-session-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimated build time: &gnome-session-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">GNOME Session Dependencies</bridgehead>

    <bridgehead renderas="sect4">Required</bridgehead>
    <para role="required"><xref linkend="GConf"/>,
    <xref linkend="gtk3"/>,
    <xref linkend="json-glib"/>,
    <xref linkend="startup-notification"/>, and
    <xref linkend="upower"/></para>

    <bridgehead renderas="sect4">Recommended</bridgehead>
    <para role="recommended"><xref linkend="polkit-gnome"/></para>

    <bridgehead renderas="sect4">Optional</bridgehead>
    <para role="optional"><xref linkend="xmlto"/></para>

    <para condition="html" role="usernotes">User Notes:
    <ulink url="&blfs-wiki;/gnome-session"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation of GNOME Session</title>

    <para>Install <application>GNOME Session</application> by
    running the following commands:</para>

<screen><userinput>./configure --prefix=$GNOME_PREFIX \
            --libexecdir=$GNOME_PREFIX/lib &amp;&amp;
make</userinput></screen>

    <para>This package does not come with a test suite.</para>

    <para>Now, as the <systemitem class="username">root</systemitem> user:</para>

<screen role="root"><userinput>make install</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Command Explanations</title>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../xincludes/gnome-prefix.xml"/>

    <para><parameter>--libexecdir=$GNOME_PREFIX/lib</parameter>: This parameter
    is used so that the <application>gnome-session</application> internal
    support programs are installed in the preferred location of <filename
    class='directory'>$GNOME_PREFIX/lib</filename> instead of <filename
    class='directory'>$GNOME_PREFIX/libexec</filename>.</para>

    <para><option>--enable-docbook-docs</option>: This parameter is used to
    build the documentation.</para>

  </sect2>

  <sect2 role="configuration" id="gnome-session-config">
    <title>Configuring gnome-session</title>

    <sect3>
      <title>Configuration Information</title>

      <para>If you are not using <application>gdm</application> to start your
      <application>GNOME</application> desktop, you will need to invoke
      <command>gnome-session</command> <emphasis>instead of</emphasis> invoking
      a window-manager directly.  All of the packages in the 'Shell' section of
      this chapter (plus all of those in 'Shell Fallback' if your video driver
      does not have 3D acceleration) need to be installed first, and some of
      the 'Utilities' - particularly <application>GNOME Terminal</application>
      (<application>xterm</application> does not  install a '.desktop' file and
      so not appear in the menus).</para>

      <para>When <command>gnome-session</command> is run, it invokes the necessary
      daemons and either <application>Metacity</application> or
      <application>gnome-shell</application> - the latter will in turn invoke
      <application>Mutter</application>. A desktop manager such as
      <application>gdm</application> will invoke <application>ConsoleKit</application>
      before the window manager, but if you use <command>startx</command> the first
      invocation after booting may fail because the daemon is not already running,
      so we will invoke it first.</para>

      <para>To automatically start the <application>gnome-session</application>
      window manager when you issue the <command>startx</command> command,
      backup your current <filename>~/.xinitrc</filename> before proceeding.
      Note that you will be able to invoke <application>GNOME Terminal</application>
      from the menu, so there is no reason to invoke xterm here. Create a new
      <filename>.xinitrc</filename> using this command:</para>

      <indexterm zone="metacity gnome-session-config">
        <primary sortas="e-AA.xinitrc">~/.xinitrc</primary>
      </indexterm>

<screen><userinput>cat &gt;&gt; ~/.xinitrc &lt;&lt; "EOF"
<literal>exec ck-launch-session dbus-launch --exit-with-session gnome-session</literal>
EOF</userinput></screen>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directory</segtitle>

      <seglistitem>
        <seg>gnome-session, gnome-session-properties, gnome-session-save,
        gnome-wm, and gnome-settings-daemon-helper</seg>
        <seg>None</seg>
        <seg><envar>$GNOME_PREFIX</envar>/{lib/gnome-session/helpers,
        share/gnome-session}</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="gnome-session-prog">
        <term><command>gnome-session</command></term>
        <listitem>
          <para>starts up the <application>GNOME</application> desktop.</para>
          <indexterm zone="gnome-session gnome-session-prog">
            <primary sortas="b-gnome-session">gnome-session</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gnome-session-utils">
        <term><command>gnome-session-*</command></term>
        <listitem>
          <para>session utilities includes a configuration program and
          other session management related utilities.</para>
          <indexterm zone="gnome-session gnome-session-utils">
            <primary sortas="b-gnome-session-*">gnome-session-*</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gnome-wm">
        <term><command>gnome-wm</command></term>
        <listitem>
          <para>uses the <envar>$WINDOW_MANAGER</envar> environment variable
          to allow a user to define a window manager of choice. If no
          <envar>$WINDOW_MANAGER</envar> is defined, <command>gnome-wm</command>
          defaults to <command>metacity</command> as the default window
          manager.</para>
          <indexterm zone="gnome-session gnome-wm">
            <primary sortas="b-gnome-wm">gnome-wm</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
